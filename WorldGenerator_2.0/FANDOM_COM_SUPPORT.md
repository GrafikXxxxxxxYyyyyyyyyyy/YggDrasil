# Поддержка Fandom.com: формирование мира по вики

**Единый канон проекта:** [CANON.md](CANON.md). Документ задаёт требование к системе: **поддержка Fandom.com** — возможность **сформировать (настроить) мир по ссылке на вики Fandom**, заполнив его **в сериализованном виде** на основе лора (описаний, статей, структуры) с этого сайта.

Сериализация мира: [World_Serialization.md](World_Serialization.md). Контент мира и начальное наполнение: [World_Serialization.md](World_Serialization.md) §2 (начальное содержание мира), [END_WORLDS.md](END_WORLDS.md) (фиксированные миры-источники).

---

## 1. Назначение

- **Пользователь передаёт ссылку** на вики на Fandom.com (например, на главную страницу вики или на раздел вики).
- **Система по этой ссылке формирует (настраивает) мир:** заполняет мир в **сериализованной форме** на основе **лора**, доступного на данном сайте: описание мира, контент, персонажи, глоссарии, сюжеты/истории и т.д.
- Цель — быстрый старт мира из готовой базы знаний сообщества (Fandom-вики) без ручного копирования: один URL → конфигурация/начальное наполнение мира.

**Пример:** пользователь передаёт ссылку на вики мультсериала «Rick and Morty» на Fandom:

- **URL:** https://rickandmorty.fandom.com/wiki  
- По этой вики система может сформировать мир: **описание мира**, **контент** (статьи вики), **персонажи** (категории/статьи персонажей), **глоссарии** (термины, локации, предметы), **истории/сюжеты** (эпизоды, сюжетные линии) и т.д. — в виде, пригодном для сериализации мира (конфиг, начальное содержание мира, глоссарий, нарратив).

---

## 2. Что должно поддерживаться (требования канона)

| Требование | Описание |
|------------|----------|
| **Вход** | URL вики на Fandom.com (например, `https://<fandom>.fandom.com/wiki` или ссылка на подраздел вики). |
| **Выход** | Мир (или конфиг мира + начальное содержание), заполненный в **сериализованной форме** на основе данных с указанного сайта. |
| **Источник данных** | Лор с Fandom: тексты статей, структура вики (категории, ссылки), описание персонажей, локаций, терминов, сюжетов — в объёме, доступном по переданной ссылке (в т.ч. обход по внутренним ссылкам вики в заданных пределах). |
| **Маппинг в модель мира** | Полученные данные мапятся в поля сериализации мира ([World_Serialization.md](World_Serialization.md)): **описание мира**, **начальное содержание** (initial story, глоссарий, правила, стиль), **персонажи**, **глоссарии**, **истории/нарратив** — так, чтобы мир можно было загрузить и использовать в цикле (Development of the world, контекст для переходов и т.д.). |
| **Реализация** | Поддержка Fandom.com должна быть **реализована** (импорт/парсинг или API, если доступно; преобразование в сериализованный мир). Детали реализации (парсер, лимиты обхода, кэш, этика использования и лицензии Fandom) задаются в TODO или в отдельном техническом документе. |

---

## 3. Место в архитектуре

- **Формирование мира по URL** — сценарий **инициализации/наполнения мира** (контент мира), а не замена цикла переходов или схемы state.
- Результат импорта с Fandom — **конфиг мира** и/или **начальное содержание мира** ([World_Serialization.md](World_Serialization.md) §2: «Начальное содержание мира»). Дальше мир работает по канону: цикл переходов, state, Development of the world и т.д.
- При необходимости мир, собранный по Fandom-вики, может быть зафиксирован как **End World** ([END_WORLDS.md](END_WORLDS.md)) — только контент, без исполняемой части; или как обычный мир с циклом.

---

## 4. Пример сценария

1. Пользователь указывает ссылку: `https://rickandmorty.fandom.com/wiki`.
2. Система обращается к Fandom (парсинг страниц вики и/или API в рамках правил сайта), собирает лор: персонажи, локации, термины, сюжеты, описание вселенной.
3. Система формирует **сериализованный мир**: описание мира, глоссарий, начальный нарратив/контент, при необходимости структурированные сущности (персонажи, места).
4. Мир сохраняется как конфиг + начальное содержание; пользователь может запускать цикл мира (Development of the world и т.д.) с этим наполнением.

---

## 5. Сводка

| Понятие | Определение |
|---------|-------------|
| **Поддержка Fandom.com** | Возможность сформировать мир по ссылке на вики Fandom: заполнение мира в сериализованной форме на основе лора с сайта (описание мира, контент, персонажи, глоссарии, истории). |
| **Вход** | URL вики на Fandom.com (например, главная вики или раздел). |
| **Выход** | Мир (конфиг + начальное содержание), пригодный для загрузки и запуска по канону. |
| **Реализация** | Должна быть реализована (импорт/парсинг или API; маппинг в сериализацию мира). |

Ссылки: [World_Serialization.md](World_Serialization.md), [World_Level.md](World_Level.md), [END_WORLDS.md](END_WORLDS.md), [CANON.md](CANON.md).
