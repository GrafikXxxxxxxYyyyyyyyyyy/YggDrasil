# Канон проекта YggDrasill (World Generator 2.0)

**Единый всеобъемлющий канон** — архитектура и правила, которым необходимо следовать. Канон допускает уточнение и расширение; все операции, реализация и документация должны ему соответствовать. Это **референсный документ** проекта («Библия» архитектуры).

**Расположение канона:** `WorldGenerator_2.0/`. Все ссылки на канон из папки `docs/` используют путь `../WorldGenerator_2.0/` к файлам канона.

---

## 1. Состав канона

| Документ | Содержание |
|----------|-------------|
| **[CANON.md](CANON.md)** (этот файл) | Входная точка канона; состав и адреса. |
| **[Philosophy.md](Philosophy.md)** | Философия проекта: идеальное и материальное, Lego-подобие, блок и узел. |
| **[System.md](System.md)** | Системная модель: иерархия уровней, контракты. |
| **[Scheme.md](Scheme.md)** | Схема мира: **непрерывная цепь переходов** (Философ → Автор → Среда → Архитектор → Творец), state (пять блоков), **переход = метаморфоза** (§1.0); **идеальные задачи переходов** (§1.1). |
| **[World_Level.md](World_Level.md)** | Уровень мира: мир как **цепочка переходов**, state, выполнение. |
| **[Stage_Level.md](Stage_Level.md)** | Уровень перехода (Stage): граф пайплайнов, реализующий один **переход** (метаморфозу state), контракт по state. |
| **[Pipeline_Level.md](Pipeline_Level.md)** | Уровень пайплайна: пайплайн как граф графов. |
| **[Graph_Level.md](Graph_Level.md)** | Уровень графа: граф узлов-задач. |
| **[Abstract_Block_And_Node.md](Abstract_Block_And_Node.md)** | Абстрактный блок и узел графа (фундамент). |
| **[Abstract_Task_Nodes.md](Abstract_Task_Nodes.md)** | Узлы-задачи (роли, контракты портов). |
| **[AGENT_SYSTEMS_SUPPORT.md](AGENT_SYSTEMS_SUPPORT.md)** | **Агентные системы:** полная интеграция в архитектуру; классические сценарии; гибкость использования; применимы на любом этапе; уровень Вселенной — обмен между мирами и кросс-мировое влияние (§0–§4). |
| **[EXPANSION_UNIVERSE_GRAPH_OF_WORLDS.md](EXPANSION_UNIVERSE_GRAPH_OF_WORLDS.md)** | **Вселенная:** граф/гиперграф миров; взаимодействие между мирами и сущностями; **этап Вселенной для сообщества** (§0); агентные системы на уровне вселенной (§1.2); **End Worlds** (§1.3). |
| **[HYPERGRAPH_AND_HYPERLINKS.md](HYPERGRAPH_AND_HYPERLINKS.md)** | **Гиперграф как движок фреймворка:** вся архитектура устроена как **гиперграф**; **крупномасштабные гиперссылки** для связывания контекстов и взаимодействия на всех уровнях. |
| **[END_WORLDS.md](END_WORLDS.md)** | **End Worlds (миры-завершения):** фиксированные, неизменяемые миры; к ним можно привязываться и с ними взаимодействовать; объектный мир обогащает контекст и истории, End World не меняется (пример: книга как End World). |
| **[LLM_API_SUPPORT.md](LLM_API_SUPPORT.md)** | Модели через API (любой блок без локальных весов). |
| **[MODEL_REUSE.md](MODEL_REUSE.md)** | Повторное использование одной модели (один ref → один экземпляр). |
| **[TRAINING_REUSE_AND_API_SCENARIOS.md](TRAINING_REUSE_AND_API_SCENARIOS.md)** | Обучение при повторном использовании и при API. |
| **[SERIALIZATION_AT_ALL_LEVELS.md](SERIALIZATION_AT_ALL_LEVELS.md)** | Сериализация на всех уровнях. |
| **[TRAINABILITY_AT_ALL_LEVELS.md](TRAINABILITY_AT_ALL_LEVELS.md)** | Обучаемость на всех уровнях. |
| **[World_Serialization.md](World_Serialization.md)** | Сериализация мира. |
| **[FANDOM_COM_SUPPORT.md](FANDOM_COM_SUPPORT.md)** | **Поддержка Fandom.com:** формирование мира по ссылке на вики Fandom; заполнение мира в сериализованной форме на основе лора с сайта (описание, персонажи, глоссарии, истории). |
| **[TODO_01_FOUNDATION.md](TODO_01_FOUNDATION.md)** … **[TODO_07_FUTURE_AND_IMPROVEMENTS.md](TODO_07_FUTURE_AND_IMPROVEMENTS.md)** | Пошаговые планы реализации по уровням; учёт агентных систем, гибкости использования, уровня Вселенной, ролей этапов мира. |

---

## 2. Ключевые принципы канона (кратко)

- **Гиперграф:** вся архитектура устроена как **гиперграф** ([HYPERGRAPH_AND_HYPERLINKS.md](HYPERGRAPH_AND_HYPERLINKS.md)); граф — частный случай (гиперрёбра размера 2). **Крупномасштабные гиперссылки** — для связывания контекстов и взаимодействия на всех уровнях.
- **Иерархия:** Block → Graph → Pipeline → Stage → World (расширение: Universe); на каждом уровне — представление в виде гиперграфа.
- **Мир:** непрерывная цепь **переходов** (Философ, Автор, Среда, Архитектор, Творец); каждый переход — метаморфоза state (материя ↔ идея; [Scheme.md](Scheme.md) §1.0); state из пяти блоков; идеальные задачи переходов — [Scheme.md](Scheme.md) §1.1.
- **Агентные системы:** полностью интегрированы; применимы на любом разумном этапе; полная гибкость использования в рамках канона.
- **Вселенная (расширение):** гиперграф миров; этап Вселенной — для сообщества; поддержка **End Worlds** — фиксированные миры, к которым можно привязываться без их изменения ([END_WORLDS.md](END_WORLDS.md)).
- **End Worlds:** миры, которые не изменяются и фиксированы; объектные миры могут ссылаться на них и обогащать свой контекст и истории персонажей; End World остаётся неизменным.
- **Единый контракт:** get_input_spec, get_output_spec, run на каждом уровне; сериализация (конфиг + чекпоинт) на всех уровнях; поддержка гиперссылок в контрактах.
- **Fandom.com:** поддержка реализована/должна быть реализована — формирование мира по ссылке на вики Fandom (например, https://rickandmorty.fandom.com/wiki): заполнение мира в сериализованной форме на основе лора с сайта (описание мира, контент, персонажи, глоссарии, истории). [FANDOM_COM_SUPPORT.md](FANDOM_COM_SUPPORT.md).

---

## 3. Использование канона

- **Обязательность:** архитектура, реализация и документация должны соответствовать канону; операции (разработка, расширение, рефакторинг) — следовать ему.
- **Уточнение и расширение:** канон может уточняться и расширяться; изменения вносятся в документы канона (WorldGenerator_2.0/) и при необходимости отражаются в TODO и в docs/.
- **Ссылки из docs/:** при обращении к канону из папки `docs/` использовать путь **`../WorldGenerator_2.0/`** к каноническим файлам (например, `[CANON.md](../WorldGenerator_2.0/CANON.md)`, `[Scheme.md](../WorldGenerator_2.0/Scheme.md)`).
