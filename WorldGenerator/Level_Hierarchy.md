# Иерархия уровней представления (Level Hierarchy)

**Сводное описание иерархии уровней Yggdrasil** — от высшего объекта (Universe) до фундаментальных сущностей (Abstract Base Block и Abstract Graph Node). Документ объединяет и систематизирует иерархию, зафиксированную в [Philosophy.md](Philosophy.md) (п. 8.6), и детализацию уровней из [Abstract_Nodes_Level.md](Abstract_Nodes_Level.md) и [Graph_Stage_Level.md](Graph_Stage_Level.md).

---

## 1. Принцип иерархии

- Каждый **вышележащий уровень** собирается из сущностей **нижележащего уровня** (композиция, граф из узлов предыдущего ранга).
- На каждом уровне сохраняется разделение **материя / идея**: материя — то, что хранится и выполняется (блоки, параметры, данные); идея — форма, связи, порядок, семантика (узлы, топология графа, контракт).
- **Universe** — единственная сущность **вне** этой иерархии наследования: не наследуется ни от чего, не является графом; только контейнер двух World и объект обучения.

---

## 2. Полная таблица уровней (сверху вниз)

| № | Уровень | Основные сущности | Краткое описание | Материя / Идея | Аналогия в физике | Где подробно |
|---|---------|-------------------|------------------|----------------|-------------------|--------------|
| **0** | **Высший объект (вне графа)** | **Universe** (Вселенная) | Не наследуется, не граф. Только **train**. Хранит два World (Мир идей, Мир материи). | — | Единственная в своём роде сущность; «контейнер двух миров». | Philosophy, § 8.0, 8.6 |
| **1** | **Два мира внутри Universe** | **World of Ideas**, **World of Matter** | Две реализации World. Идей: цикл Автор → Создатель. Материи: цикл Создатель → Автор. | Материя: блоки внутри графа. Идея: направление цикла, материализация/идеализация. | Два «режима» одного мира (как два направления процесса). | Philosophy, § 8.1, 8.2 |
| **2** | **World (Мир)** | **Author**, **Creator** | Циклический граф из двух узлов. Запуск и обучение. Автор → Создатель (материализация идей), Создатель → Автор (идеализация материи). | Материя: блоки Автора и Создателя. Идея: цикл, двунаправленность. | Замкнутая система из двух подсистем (идея и материя). | Philosophy, § 8.1–8.3 |
| **3** | **Автор и Создатель как графы** | **Author**, **Creator** (каждый = граф пайплайнов) | Каждый — **граф пайплайнов**: множество пайплайнов, связанных в граф. Узлы уровня World раскладываются в граф следующего ранга. | Материя: пайплайны и их состояние. Идея: топология графа пайплайнов. | «Мезоуровень»: составная система из многих подсистем. | Philosophy, § 8.2, 8.6 |
| **4** | **Пайплайн** | **Pipeline** (граф этапов) | Граф, узлами которого служат **этапы** (Stage). Пайплайн = граф этапов; полный сценарий вычисления. | Материя: множество этапов и данные между ними. Идея: последовательность/сеть шагов. | Каскад реакций; последовательность фаз процесса. | Graph_Stage_Level, § 3 |
| **5** | **Этап (Stage)** | **Stage** (базовый граф, ComputeGraph) | Один вычислительный граф: множество узлов-блоков (Backbone, Solver, Codec, Adapter, …), связанных рёбрами. Одна «идея» одного шага; одна исполняемая единица. | Материя: узлы-блоки и рёбра (данные). Идея: одна топология, один контракт этапа. | Один процесс рассеяния / одна диаграмма Фейнмана; одна связанная система (атом, молекула). | Graph_Stage_Level, § 2 |
| **—** | **Рамка (не отдельный уровень)** | Модальность, домен, контекст | Модальность: изображение, текст, звук, 3D. Домен: генерация, обучение, инференс. Контекст: правила, глоссарий, стиль. Задают условия, в которых работают графы. | Материя: конфиг, данные. Идея: сектор, режим, граничные условия. | Сектор теории; граничные условия, внешние параметры. | Graph_Stage_Level, § 4 |
| **6** | **Узлы графа** | Abstract nodes of the graph | Места в графе, к которым применяется логика «блок → узел». Абстрактные узлы, из которых собираются этапы. | Узел = идея (положение, связи). Содержимое узла = материя (блок). | Роль «вершины» в диаграмме. | Philosophy, § 4.2, 8.6 |
| **7** | **Уровень над фундаментом** | **Abstract Backbone, Solver, Codec, Adapter**, Conditioner, Guidance, … | Узлы-задачи: каждый наследуется от Block и Node и задаёт **спецификацию задачи** (backbone — ядро, solver — шаг, codec — encode/decode, adapter — адаптация). Конкретные модели — реализации; из них собирается граф. | Материя: блок в узле. Идея: тип узла, задача. | Типы частиц; типы вершин в диаграмме. | Abstract_Nodes_Level |
| **8** | **Фундаментальный уровень** | **Abstract Base Block**, **Abstract Graph Node** | Block — Lego-кирпич (параметры, тензоры, выполнение). Node — место/роль в графе (положение, рёбра). Правило: любой Block может стать Node. | Block = материя. Node = идея (форма в графе). | Фермионы (содержимое), бозоны (взаимодействие). | Philosophy, § 4, 4.4 |

---

## 3. Схема иерархии (сверху вниз)

```
Universe (уровень 0 — вне наследования, не граф; только train)
    │
    ├── World of Ideas (цикл: Автор → Создатель)
    └── World of Matter (цикл: Создатель → Автор)
            │
            ▼
World = Автор + Создатель (циклический граф двух узлов)  … уровни 1–2
            │
            ▼
Автор, Создатель (каждый = граф пайплайнов)  … уровень 3
            │
            ▼
Pipeline (граф этапов)  … уровень 4
            │
            ▼
Stage (базовый граф; узлы = Backbone, Solver, Codec, Adapter, …)  … уровень 5
            │
            ▼
Узлы графа (абстрактные)  … уровень 6
            │
            ▼
Abstract Backbone, Solver, Codec, Adapter, … (узлы-задачи; Block + Node)  … уровень 7
            │
            ▼
Abstract Base Block  +  Abstract Graph Node (фермионы + бозоны)  … уровень 8
```

---

## 4. Направление сборки (снизу вверх)

| Собираем из | Получаем |
|-------------|----------|
| Abstract Base Block + Abstract Graph Node | Логика «блок → узел»; любой блок может стать узлом. |
| Abstract Backbone, Solver, Codec, Adapter (типы узлов) + конкретные модели | Узлы графа с заданной задачей; «словарь» типов узлов. |
| Узлы графа (типизированные) + рёбра (потоки между портами) | **Stage** — один вычислительный граф (один процесс, одна единица выполнения). |
| Stage (этапы) + связи между этапами | **Pipeline** — граф этапов (полный сценарий, каскад шагов). |
| Pipeline’ы + топология графа пайплайнов | **Автор** или **Создатель** (каждый = граф пайплайнов). |
| Автор + Создатель + цикл (два направления) | **World** — циклический граф двух узлов. |
| Два World (Мир идей, Мир материи) | **Universe** — контейнер; обучение на расхождении двух миров. |

---

## 5. Сводка по документам

| Документ | Что описывает в иерархии |
|----------|---------------------------|
| **[Philosophy.md](Philosophy.md)** | Фундаментальный уровень (Block, Node; фермионы/бозоны, § 4, 4.4). World, Universe, Автор, Создатель (§ 8). Зафиксированная иерархия уровней (§ 8.6). Промежуточные этапы как заглушки (§ 7). |
| **[Abstract_Nodes_Level.md](Abstract_Nodes_Level.md)** | Уровень 7: абстрактные узлы-задачи (Backbone, Solver, Codec, Adapter). Двойное наследование Block + Node. Спецификация задач. Физические аналогии (типы частиц, вершины). |
| **[Graph_Stage_Level.md](Graph_Stage_Level.md)** | Уровни 5 и 4: Stage (граф как целое), Pipeline (граф этапов). Материя и идея этапа. Модальность, домен, контекст. Физические аналогии (процесс, связанная система, каскад реакций). |
| **Level_Hierarchy.md** (этот документ) | Сводная иерархия уровней в одном месте; таблица, схема, направление сборки; отсылки к трём документам выше. |

---

## 6. Использование

- **Иерархия уровней** — единая от Universe до Abstract Base Block и Abstract Graph Node; все новые сущности соотносятся с уровнем из таблицы (§ 2) и с принципом материя/идея.
- **Детализация** по каждому уровню — в указанных документах (Philosophy, Abstract_Nodes_Level, Graph_Stage_Level).
- **План работ** и техническая реализация — в [To_do.md](To_do.md).
