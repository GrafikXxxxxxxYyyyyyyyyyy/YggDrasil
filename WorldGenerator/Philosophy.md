# Философия проекта World Generator (Yggdrasil)

**Главный ориентир при проектировании всей системы.** Идея и идеология проекта; далее — уточнения и правки.

---

## 1. Идея проекта

Проект строится на представлении мира как **набора связанных блоков** — по аналогии с конструктором Lego. Блоки соединяются не только физически (потоками данных), но и **идеей**: общая логика и правила связывания задают, как материальные сущности образуют целое. Таким образом, система является одновременно:

- **конструктором** — всё собирается из блоков;
- **средой с идеей** — связи и композиция подчиняются единой философии и правилам преобразования.

Цель — дать **максимальную свободу создания** для разработчиков и пользователей при сохранении ясной и единой основы: всё, что есть в проекте, опирается на одни и те же фундаментальные сущности и принципы.

---

## 2. Философская основа: Идеальное и Материальное

Мир в проекте разделяется на два взаимосвязанных начала:

| Начало | Сущность в проекте | Смысл |
|--------|--------------------|--------|
| **Материальное** | То, что **хранит** и **несёт**: параметры, тензоры, ссылки, данные, веса, конфигурацию. Всё, что можно назвать «носителем» состояния и структуры. | Материя = то, из чего собирается система и что передаётся по цепочкам. |
| **Идеальное** | То, что задаёт **связи**, **порядок** и **логику превращения** материальных сущностей в элементы целого. Упорядочивание блоков в граф, правила соединения, семантика узлов и рёбер. | Идея = форма, в которую складывается материя; логика преобразования блока в узел графа. |

- **Материальное** воплощается в **блоке** (Lego-кирпиче): нечто, что можно положить в граф и соединить с другим.
- **Идеальное** воплощается в **узле графа** и в **логике превращения**: любой блок может стать узлом; сама эта возможность и правила превращения и есть идеальная составляющая.

Вся архитектура держится на этом разделении: с одной стороны — единый материальный «атом» (базовый блок), с другой — единая идеальная «форма» (узел графа и правило: блок → узел).

---

## 3. Первый и главный принцип: Lego-подобие

Вся система должна быть **Lego-подобной** и собираться как конструктор.

- **Любой блок с любым блоком.** Нет жёстко заданных «единственно верных» пар; совместимость определяется портами и типами, а не фиксированным списком связей.
- **Абсолютная гибкость сборки.** Порядок добавления блоков и их количество не предписаны сверху. Конструктор, а не жёсткий пайплайн.
- **Реальная песочница.** Всё можно соединять со всем в рамках правил графа (совместимость портов, направление потоков). Порядок — любой, количество блоков — любое.
- **Полноценный Lego-конструктор.** Максимальная свобода создания для разработчиков: добавление своих блоков, своих типов узлов, своих правил преобразования без переписывания ядра.

Итог: **максимальная свобода** при **единой основе** — материальный блок и идеальная логика «блок → узел графа».

---

## 4. Фундаментальный уровень: техническая реализация сущностей

Всё в проекте строится из двух фундаментальных сущностей.

### 4.1 Материальное начало: Abstract Base Block (абстрактный базовый блок)

**Сущность:** абстрактный базовый блок — Lego-кирпич. **Любой объект в проекте может быть представлен как базовый блок.**

- Это **материальное** представление: блок хранит всё, что относится к «носителю»:
  - параметры (конфиг, гиперпараметры);
  - тензоры (веса, кэш, промежуточные данные);
  - ссылки (на другие блоки, ресурсы, граф);
  - всё, что нужно для вычислений и сохранения состояния.
- Блок — атом сборки. Модели, кодекы, кондиционеры, солверы, сэмплеры, пайплайны — всё, что участвует в системе, в основе своей есть (или оборачивается в) базовый блок.

**Технически:** материальная фундаментальная сущность = **Abstract Base Block**.

---

### 4.2 Идеальное начало: Abstract Node in the Graph (абстрактный узел в графе)

**Сущность:** узел в графе — это **идеальная** форма, в которую может быть превращён **любой** абстрактный базовый блок.

- Узел графа не «привязан» к одному конкретному типу блока. **Любой** Abstract Base Block может стать узлом графа.
- Фундаментальная **идеальная** составляющая — это **логика преобразования** базового блока в узел графа: правило, по которому материальный блок получает место и роль в графе (идее) системы.
- Граф задаёт связи между узлами (рёбра, порты, потоки данных). Тем самым он задаёт **идею** композиции: что с чем соединено, в каком порядке выполняется, какие данные куда передаются.

**Технически:** идеальная фундаментальная сущность = **Abstract Node in the Graph**; фундаментальная идеальная **логика** = **преобразование Abstract Base Block → Node in the Graph**.

---

## 5. Сводная схема фундаментального уровня

```
МАТЕРИАЛЬНОЕ                          ИДЕАЛЬНОЕ
─────────────────────────────────────────────────────────────
Abstract Base Block                  Abstract Node in the Graph
(Lego-кирпич)                        (форма блока в графе)
     │                                        │
     │  хранит:                               │  задаёт:
     │  • параметры, конфиг                   │  • положение в графе
     │  • тензоры, веса                       │  • связи с другими узлами
     │  • ссылки                              │  • порядок и семантику
     │                                        │
     └──────────────┬─────────────────────────┘
                    │
                    ▼
         Логика преобразования:
         «любой Base Block → Node in the Graph»
                    │
                    ▼
         Система как целое: граф из блоков,
         собранный по правилам (идея) из кирпичей (материя).
```

- **Материальная основа:** Abstract Base Block.  
- **Идеальная основа:** узел в графе + правило превращения блока в узел.  
- **Сборка системы:** граф, узлы которого — блоки; связи и порядок — идея; содержимое узлов — материя.

---

## 6. Промежуточные этапы (заглушки развития идеи)

Между фундаментальным уровнем (блок, узел графа) и верхним уровнем (World) предполагаются **промежуточные ступени**. Здесь они заданы как заглушки — места для последующей разработки философской и технической идеи.

| Уровень | Заглушка | Назначение (предварительно) |
|---------|----------|-----------------------------|
| **Промежуточный 1** | Граф как целостная единица | Вычислительный граф (ComputeGraph): множество узлов-блоков, связанных рёбрами; одна «идея» одной пайплайны или подсистемы. *Требует уточнения:* как именно граф соотносится с идеальным (целая идея одного пайплайна?) и материальным (совокупность блоков). |
| **Промежуточный 2** | Модальность / домен | Слой «изображение», «текст», «звук», «3D» или домен «генерация», «обучение», «инференс». *Заглушка:* единая ли идея модальности или комбинация графов; как модальность стыкуется с блоком и с World. |
| **Промежуточный 3** | Контекст / среда мира | Параметры, правила, глоссарий, стиль — то, что задаёт «рамку» генерации или обучения без ещё не будучи полным миром. *Заглушка:* это отдельная сущность или часть World; материальное vs идеальное представление контекста. |
| **Промежуточный 4** | *(резерв)* | Свободная заглушка для следующего уровня абстракции (например, «сессия», «сценарий», «сцена»). |

При развитии философии каждая заглушка может быть раскрыта: какая сущность материальна, какая идеальна, как она собирается из блоков и узлов и как подводит к объекту World.

---

## 7. Верхний уровень: объект World (Мир)

В проекте **высшая абстракция** представлена в виде одного обобщающего блока — **World** (объект «Мир»).

### 7.1 World как высшая сущность

- **World** — это **полный, конечный мир**, собранный из всего нижележащего: блоков, графов, модальностей, контекста.
- В иерархии абстракций World стоит **над** всем остальным: он — единый «зонтичный» блок, под которым собраны графы, пайплайны, модели, правила, стиль, глоссарий и т.д.
- World **является** блоком (в смысле фундаментального уровня): его можно трактовать как Abstract Base Block высшего уровня, внутри которого — целый граф или композиция графов и контекста. Тем самым материальное (блок) и идеальное (структура и логика мира) в нём сходятся в одной сущности.

### 7.2 Два компонента World: Автор и Создатель

Мир (World) как целое складывается из **двух взаимосвязанных начал** — тех же Идеального и Материального, но на верхнем уровне абстракции.

| Компонент | Роль в World | Соответствие фундаменту |
|-----------|----------------|--------------------------|
| **Автор (Author)** | Задаёт **идею**: как в мире всё должно работать. Правила, стиль, глоссарий, ограничения, сценарии, цели — всё, что определяет «как устроен мир» и «что в нём возможно». Автор не материализует, а **задаёт форму**. В ядре Автора — **большая языковая модель (LLM)**; см. ниже. | Идеальное начало: идея, логика, порядок. |
| **Создатель (Creator)** | **Материализует** идеи, которые задал Автор. Претворяет замыслы в графы, блоки, модели, данные, артефакты генерации. Создатель — тот, кто собирает и запускает материальную реализацию мира. | Материальное начало: блоки, тензоры, выполнение. |

- **Автор** отвечает на вопрос «как должно быть»; **Создатель** — на «что реально сделано и запущено».
- Вместе они образуют **полный, завершённый, единый мир**: идея (Автор) и её воплощение (Создатель) нераздельны внутри объекта World. Мир можно запустить или обучить только когда есть и замысел (Автор), и реализация (Создатель).

```
World = Автор + Создатель
         │         │
         │         └── материализует идеи (графы, блоки, генерация, обучение)
         └──────────── задаёт идею (как всё должно работать в мире)
```

#### Автор в ядре: большая языковая модель (LLM)

**Автор в своей основе — большая языковая модель (Large Language Model).** Именно она задаёт идею мира в виде текста: сценарии, конфигурацию, описания персонажей, глоссарий, сцены, действия, диалоги и логику взаимодействия.

- **Сценарии и конфигурация.** Автор пишет скрипты и конфигурацию мира: как он устроен, какие в нём правила, форматы данных, сценарии запуска.
- **Персонажи, идея, глоссарий.** Автор описывает персонажей, общую идею мира, глоссарий терминов, имён, мест — всё, что задаёт «словарь» и «лица» мира.
- **Сцены, действия, диалоги.** Автор создаёт описания сцен, действий, диалогов; задаёт, что происходит в мире в широком смысле — нарратив и взаимодействия.
- **Логика взаимодействия.** После того как Автор создаёт идею мира, он же описывает **логику взаимодействия** этого мира: как элементы связаны, как реагируют друг на друга, по каким правилам разворачиваются события.
- **Новые сценарии и сюжет.** Автор придумывает новые сценарии, новые типы взаимодействий, новые сюжетные ходы; расширяет и меняет мир, оставаясь в рамках его замысла.
- **Полный контроль над миром.** Автор **полностью управляет** миром в идеальном смысле: всё, что в мире задано правилами, стилем, сюжетом, глоссарием и логикой взаимодействия, исходит от Автора (LLM). Создатель лишь материализует то, что Автор описал.

Таким образом, Автор — это не абстрактный «кто-то», а **конкретная реализация в виде LLM**, которая генерирует и поддерживает всю текстовую (идеальную) часть мира: от конфигов и глоссария до сцен, диалогов и сюжетной логики.

### 7.3 Запуск и обучение

- Объект World — это мир, который можно **запустить** (launch): выполнить генерацию, инференс, симуляцию в рамках этого мира.
- Объект World — это мир, который можно **обучить** (train): дообучить или обучить с нуля модели и параметры, входящие в состав мира, не выходя за его границы.
- Таким образом, World — **единая точка входа** для «живого» использования: всё, что ниже, скрыто внутри; снаружи остаётся один объект — мир, который можно запускать или обучать. Запуск и обучение опираются на **Создателя** (материализация), в рамках правил и замысла **Автора** (идея).

### 7.4 Сводка по уровням

```
ВЕРХНИЙ УРОВЕНЬ
─────────────────────────────────────────────────────────────
  World (объект «Мир»)
  • полный, конечный, единый мир
  • два компонента: Автор (идея — как всё должно работать) + Создатель (материализация идей)
  • один обобщающий блок над всей системой
  • можно запустить (launch) или обучить (train)
                    │
                    ▼
ПРОМЕЖУТОЧНЫЕ УРОВНИ (заглушки)
  • граф как целостная единица
  • модальность / домен
  • контекст / среда мира
  • (резерв)
                    │
                    ▼
ФУНДАМЕНТАЛЬНЫЙ УРОВЕНЬ
  • Abstract Base Block (материя)
  • Abstract Node in the Graph (идея)
  • логика «блок → узел»
```

Итог: от **блока и узла** (фундамент) через **промежуточные заглушки** к **World** — единственной высшей абстракции. World есть **Автор** (идея, как всё должно работать) и **Создатель** (материализация идей); вместе они образуют полный мир, пригодный к запуску и обучению.

---

## 8. Использование документа

Этот файл — **главный ориентир** при проектировании:

- все новые сущности соотносятся с блоком (материя) и/или узлом графа (идея);
- новые механики не нарушают принцип «всё можно соединять со всем» в рамках графа;
- расширения добавляют новые типы блоков или новые правила преобразования, а не обход фундаментального уровня;
- промежуточные уровни уточняются по мере развития идеи;
- **целевая вершина** архитектуры — объект **World**: полный мир, который можно запустить или обучить.

Дальнейшие уточнения и правки философии вносятся в этот документ и затем отражаются в To_do и технической реализации.
