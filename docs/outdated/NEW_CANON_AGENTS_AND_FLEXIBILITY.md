# Новый канон: агентные системы, гибкость использования, уровень Вселенной

**Адрес канона из папки docs:** все документы канона находятся в **`../WorldGenerator_2.0/`** (относительно docs). Входная точка: **[CANON.md](../WorldGenerator_2.0/CANON.md)** — единый всеобъемлющий референс архитектуры; ему необходимо следовать; канон допускает уточнение и расширение.

Краткая фиксация **расширенного канона** YggDrasill: полная интеграция агентных систем, классические сценарии на любом уровне, полная гибкость использования, этап Вселенной для сообщества, идеальные задачи переходов мира (канон ролей). Полные формулировки — в канонических документах в [WorldGenerator_2.0](../WorldGenerator_2.0/).

---

## 1. Агентные системы

- **Полная интеграция:** агентные системы полностью поддержаны и **полностью интегрированы в архитектуру движка**. Контракты блока, графа, пайплайна, этапа и мира допускают агентные сущности; исполнитель графа поддерживает agent_loop; сериализация и обучение распространяются на состояние агентов.
- **Применимы на любом этапе:** блок (блок-агент), граф (граф с агентом и инструментами), пайплайн (граф-агент как узел), этап (этап-агент), мир (агентные этапы), при расширении — вселенная (обмен между мирами через агентов/сущности).
- **Классические сценарии:** пользователь может использовать YggDrasill **только** для построения и запуска автоматизированных агентных систем (в рамках канона), без обязательного подъёма до мира или полного стека.

**Источник:** [AGENT_SYSTEMS_SUPPORT.md](../WorldGenerator_2.0/AGENT_SYSTEMS_SUPPORT.md) §0.

---

## 2. Гибкость использования и классические сценарии

- Пользователь может использовать движок на **любом уровне представления** в **классических сценариях** в рамках единого канона:
  - только блоки (например, нейросеть для детекции);
  - только граф (инференс/обучение LLM или диффузии);
  - только агентные системы;
  - только модель мира (построение мира по Scheme);
  - комбинированные пайплайны (язык + диффузия, язык + диффузия + агенты + мир).
- **Полная гибкость:** использование каждой части по отдельности, сборка подсистем, широкий спектр задач — при **простоте и элегантности структуры** и **строгом соблюдении канона и философии** ([Philosophy.md](../WorldGenerator_2.0/Philosophy.md), [Scheme.md](../WorldGenerator_2.0/Scheme.md)).

**Источник:** [AGENT_SYSTEMS_SUPPORT.md](../WorldGenerator_2.0/AGENT_SYSTEMS_SUPPORT.md) §0.2.

---

## 3. Уровень Вселенной: граф миров и кросс-мировое влияние

- **Вселенная** — граф миров: узлы = миры, рёбра = связи между мирами (payload_spec: артефакты, контекст, события, сущности). Глубокая проработка **взаимодействия между мирами** и **между сущностями** внутри каждого мира.
- **Агентные системы на уровне вселенной:** обмен данными и информацией между мирами; сущности (персонажи, агенты) могут «переходить» из мира A в мир B. **Кросс-мировое влияние:** персонаж из мира A в мире B влияет своими действиями на историю мира B и на свою историю в мире A (откуда пришёл).

**Источники:** [AGENT_SYSTEMS_SUPPORT.md](../WorldGenerator_2.0/AGENT_SYSTEMS_SUPPORT.md) §0.4, [EXPANSION_UNIVERSE_GRAPH_OF_WORLDS.md](../WorldGenerator_2.0/EXPANSION_UNIVERSE_GRAPH_OF_WORLDS.md) §1.1–1.2.

---

## 4. Идеальные задачи переходов мира (канон ролей)

- **Философ:** описание и идеализация всего материального, приходящего в мир; описание новых сущностей и нового способа их представления на уровне смыслов и логики (→ блок 4).
- **Автор:** глубокий анализ идей Философа и описание новых существ в рамках мирового контекста и хода истории мира (→ блок 5).
- **Среда:** управление миром; редактирование контекста мира; генерация следующих шагов развития мира (World update + Development of the world).
- **Архитектор:** интерпретация того, как мир должен развиваться; перевод идеологической структуры развития в технически доступную структуру; техническая документация для реализации изменений (→ блок 2).
- **Творец:** прямая реализация технических изменений и создание новых образов, структур и материальных объектов (→ блок 3). Цикл замыкается: новые материальные объекты снова описываются Философом и т.д.

**Источник:** [Scheme.md](../WorldGenerator_2.0/Scheme.md) §1.1.

---

## 5. Вселенная для сообщества

Этап **Вселенная** создан **прежде всего для сообщества**: сравнение миров, развитие миров через взаимодействие персонажей с мирами других пользователей, единая система мировых взаимодействий, обмен результатами и идеями, группы миров (общие идеи/сюжет). Возможность творчески и деструктивно влиять на экосистему (синтез новых миров из группы миров, аннигиляция миров). На уровне Вселенной — **единый поток трансляции (single fluid broadcast)** всех взаимодействий; важны **децентрализация** и **полная распределённость** при сохранении возможностей нижележащих уровней и удобстве для сообщества.

**Источник:** [EXPANSION_UNIVERSE_GRAPH_OF_WORLDS.md](../WorldGenerator_2.0/EXPANSION_UNIVERSE_GRAPH_OF_WORLDS.md) §0.

---

## 6. Гиперграф, гиперссылки, End Worlds

- **Гиперграф как движок:** вся архитектура фреймворка устроена как **гиперграф**; граф — частный случай (гиперрёбра размера 2). **Крупномасштабные гиперссылки** — для связывания контекстов и взаимодействия на всех уровнях. **Источник:** [HYPERGRAPH_AND_HYPERLINKS.md](../WorldGenerator_2.0/HYPERGRAPH_AND_HYPERLINKS.md).
- **End Worlds (миры-завершения):** поддержка **фиксированных, неизменяемых миров**. К ним можно привязываться и с ними взаимодействовать (читать контекст); объектный мир обогащает свой контекст и истории персонажей, End World не меняется. Пример: книга как End World; персонажи A и B в диалоге отсылают к книге — контекст книги обогащает диалог и истории A и B, книга остаётся неизменной. **Источник:** [END_WORLDS.md](../WorldGenerator_2.0/END_WORLDS.md).

---

## 7. Связь с TODO и документацией

- Все TODO (01–07) приведены в соответствие с каноном; в TODO_07 — уровень Вселенной, End Worlds, гиперграф.
- Идеальные задачи переходов мира и назначение Вселенной для сообщества — [Scheme.md](../WorldGenerator_2.0/Scheme.md) §1.1 (переход = метаморфоза state, §1.0), [EXPANSION_UNIVERSE_GRAPH_OF_WORLDS.md](../WorldGenerator_2.0/EXPANSION_UNIVERSE_GRAPH_OF_WORLDS.md) §0.
- Обновлены документы в `docs/`: [СТАТУС_ПО_ЭТАПАМ.md](СТАТУС_ПО_ЭТАПАМ.md), [EXPAND_DONE_AND_FUTURE.md](EXPAND_DONE_AND_FUTURE.md), [OUTLINE_TODO_02_TO_07.md](OUTLINE_TODO_02_TO_07.md), [VISION_AND_DOCUMENTATION_ROADMAP.md](VISION_AND_DOCUMENTATION_ROADMAP.md).
