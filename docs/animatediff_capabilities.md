# AnimateDiff –≤ YggDrasil: –∫–∞—Ä—Ç–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –∏ Lego-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–í—Å–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ AnimateDiff (–≤–∫–ª—é—á–∞—è —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ) —Ä–µ–∞–ª–∏–∑—É—é—Ç—Å—è –∫–∞–∫ **–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –±–ª–æ–∫–∏ –∏ –∞–¥–∞–ø—Ç–µ—Ä—ã**, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∞—Ç—å –∫ **–ª—é–±—ã–º** –ø–∞–π–ø–ª–∞–π–Ω–∞–º (video, image, audio), –∞ –Ω–µ —Ç–æ–ª—å–∫–æ –∫ –æ–¥–Ω–æ–º—É —à–∞–±–ª–æ–Ω—É.

---

## üé¨ –†–µ–∂–∏–º—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ ‚Üí –∫–∞–∫ –≤ YggDrasil

| –†–µ–∂–∏–º | –û–ø–∏—Å–∞–Ω–∏–µ | –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤ YggDrasil |
|-------|----------|------------------------|
| **Text-to-Video (T2V)** | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ —Ç–µ–∫—Å—Ç—É | –®–∞–±–ª–æ–Ω `animatediff_txt2vid`: `prompt` ‚Üí conditioner ‚Üí denoise_loop ‚Üí codec. –õ—é–±–æ–π –≥—Ä–∞—Ñ —Å `denoise_loop` + video codec. |
| **Image-to-Video (I2V)** | –ê–Ω–∏–º–∞—Ü–∏—è —Å—Ç–∞—Ç–∏—á–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è | –í—Ö–æ–¥ `source_image` –∏–ª–∏ `latents` –∏–∑ VAE-–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è + —à—É–º –ø–æ strength. –ë–ª–æ–∫ `codec.encode` –∏–ª–∏ –ø–µ—Ä–µ–¥–∞—á–∞ `latents` –≤ –≥—Ä–∞—Ñ. |
| **Video-to-Video (V2V)** | –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è –≤–∏–¥–µ–æ | –¢–æ –∂–µ, —á—Ç–æ I2V: `latents` = –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤–∏–¥–µ–æ (–∏–ª–∏ –ø–µ—Ä–≤—ã–π –∫–∞–¥—Ä –ø–æ–≤—Ç–æ—Ä—ë–Ω) + —à—É–º. –í—Ö–æ–¥ `source_video` ‚Üí codec.encode ‚Üí initial_latents. |
| **Prompt Travel** | –ü—Ä–æ–º–ø—Ç –º–µ–Ω—è–µ—Ç—Å—è –ø–æ –∫–∞–¥—Ä–∞–º/–≤—Ä–µ–º–µ–Ω–∏ | –ö–æ–Ω–¥–∏—Ü–∏–æ–Ω–µ—Ä `conditioner/prompt_schedule`: –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `prompt_schedule` (—Å–ø–∏—Å–æ–∫ (t_start, t_end, prompt) –∏–ª–∏ per-frame). –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –≤–º–µ—Å—Ç–æ –æ–¥–Ω–æ–≥–æ conditioner –≤ –ª—é–±–æ–π –ø–∞–π–ø–ª–∞–π–Ω. |
| **Regional Prompting** | –†–∞–∑–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã –ø–æ –æ–±–ª–∞—Å—Ç—è–º | –ë–ª–æ–∫ `conditioner/regional`: –º–∞—Å–∫–∞ + —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–º–ø—Ç–æ–≤ –ø–æ —Ä–µ–≥–∏–æ–Ω–∞–º; –≤—ã—Ö–æ–¥ ‚Äî –æ–±—ä–µ–¥–∏–Ω—ë–Ω–Ω—ã–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–∏. –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –ª—é–±–æ–π –≥—Ä–∞—Ñ —Å conditioner. |

---

## üîå –ú–æ–¥–µ–ª–∏ –∏ –≤–µ—Ä—Å–∏–∏ ‚Üí –±–ª–æ–∫–∏

| –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å | –†–µ–∞–ª–∏–∑–∞—Ü–∏—è |
|-------------|------------|
| **Plug-and-Play** | Backbone `backbone/unet3d_condition` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ª—é–±–æ–π SD 1.5 checkpoint; Motion Module –ø–æ–¥–≥—Ä—É–∂–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ (motion_adapter). –¢–æ –∂–µ –¥–ª—è `backbone/unet2d_condition` –≤ image. |
| **AnimateDiff v1/v2/v3** | –ö–æ–Ω—Ñ–∏–≥ backbone: `motion_adapter_version`, `motion_adapter_pretrained`. –†–∞–∑–Ω—ã–µ –ø—Ä–µ—Ç—Ä–µ–Ω—ã –≤ –æ–¥–Ω–æ–º —Ç–∏–ø–µ –±–ª–æ–∫–∞. |
| **AnimateDiff Light / Turbo / LCM** | –û—Ç–¥–µ–ª—å–Ω—ã–µ —Å–æ–ª–≤–µ—Ä—ã: `diffusion/solver/lcm`, `diffusion/solver/turbo` + –º–µ–Ω—å—à–µ —à–∞–≥–æ–≤. –ü–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è –≤ —Ç–æ—Ç –∂–µ denoise_step. |
| **HotshotXL (SDXL)** | –®–∞–±–ª–æ–Ω –Ω–∞ –±–∞–∑–µ `backbone/unet3d_condition` —Å `pretrained` SDXL + –æ—Ç–¥–µ–ª—å–Ω—ã–π motion –¥–ª—è SDXL. |
| **LoRA / DreamBooth / TI** | –ê–¥–∞–ø—Ç–µ—Ä—ã `adapter/lora`, `adapter/textual_inversion` —É–∂–µ –µ—Å—Ç—å; –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è –∫ backbone —á–µ—Ä–µ–∑ `add_adapter_to_graph` –∏–ª–∏ —Å–ª–æ—Ç—ã. |

---

## ‚öôÔ∏è –ú–æ–¥—É–ª–∏ –¥–≤–∏–∂–µ–Ω–∏—è ‚Üí –±–ª–æ–∫–∏ –∏ —Å–ª–æ—Ç—ã

| –ú–æ–¥—É–ª—å | –†–µ–∞–ª–∏–∑–∞—Ü–∏—è |
|--------|------------|
| **Motion Module (–æ—Å–Ω–æ–≤–Ω–æ–π)** | –í—Å—Ç—Ä–æ–µ–Ω –≤ `backbone/unet3d_condition` –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–∑ diffusers (UNetMotionModel). –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –≤—ã–Ω–æ—Å–∏—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –±–ª–æ–∫ `motion/motion_adapter` —Å –≤—ã—Ö–æ–¥–æ–º, –ø–æ–¥–∫–ª—é—á–∞–µ–º—ã–º –∫ backbone. |
| **Motion LoRA** | –ë–ª–æ–∫ `adapter/motion_lora`: –∑–∞–≥—Ä—É–∂–∞–µ—Ç 8 —Ç–∏–ø–æ–≤ (pan, zoom, ‚Ä¶), –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫ —Ç–µ–º –∂–µ —Å–ª–æ—è–º, —á—Ç–æ –∏ motion module. –î–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –≥—Ä–∞—Ñ –∫–∞–∫ —É–∑–µ–ª –º–µ–∂–¥—É conditioner –∏ loop –∏–ª–∏ –∏–Ω–∂–µ–∫—Ç–∏—Ç—Å—è –≤ backbone. |
| **Multiple Motion Models** | –í –≥—Ä–∞—Ñ–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —É–∑–ª–æ–≤ motion, –∏—Ö –≤—ã—Ö–æ–¥—ã –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è (—Å—É–º–º–∞/–∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏—è) –ø–µ—Ä–µ–¥ –ø–æ–¥–∞—á–µ–π –≤ backbone. –ë–ª–æ–∫ `motion/motion_combine`. |
| **SparseCtrl** | –ë–ª–æ–∫ `adapter/sparse_control`: –≤—Ö–æ–¥—ã ‚Äî –∫–ª—é—á–µ–≤—ã–µ –∫–∞–¥—Ä—ã (–∏–Ω–¥–µ–∫—Å—ã + –ª–∞—Ç–µ–Ω—Ç—ã –∏–ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è), –≤—ã—Ö–æ–¥ ‚Äî —É—Å–ª–æ–≤–∏–µ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è backbone. –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ denoise_loop –∫–∞–∫ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ —É—Å–ª–æ–≤–∏–µ. |

---

## üß© –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ ‚Üí –∞–¥–∞–ø—Ç–µ—Ä—ã

| –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è | –†–µ–∞–ª–∏–∑–∞—Ü–∏—è |
|------------|------------|
| **ControlNet** | `add_controlnet_to_graph(graph, ...)` ‚Äî —É–∂–µ –µ—Å—Ç—å; —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º –≥—Ä–∞—Ñ–æ–º —Å `denoise_loop` –∏ backbone —Å `adapter_features`. |
| **IP-Adapter** | `add_ip_adapter_to_graph(graph, ...)` ‚Äî —É–∂–µ –µ—Å—Ç—å; –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ –ª—é–±–æ–º—É —Ç–∞–∫–æ–º—É –≥—Ä–∞—Ñ—É. |
| **OpenPose + AnimateDiff** | ControlNet —Å `controlnet_pretrained` –¥–ª—è pose; —Ç–æ—Ç –∂–µ `add_controlnet_to_graph`. |
| **Regional Prompter** | –ë–ª–æ–∫ `conditioner/regional` (—Å–º. –≤—ã—à–µ). |
| **ADetailer** | –ü–æ—Å—Ç–æ–±—Ä–∞–±–æ—Ç–∫–∞: –±–ª–æ–∫ `postprocess/adetailer` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç decoded video –∏ –º–∞—Å–∫–∏ –ª–∏—Ü/–æ–±—ä–µ–∫—Ç–æ–≤; –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ codec –≤ –≥—Ä–∞—Ñ–µ. |
| **DDIM Inversion** | –ë–ª–æ–∫ `process/inversion_ddim`: –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ/–≤–∏–¥–µ–æ ‚Üí –ª–∞—Ç–µ–Ω—Ç—ã —á–µ—Ä–µ–∑ –∏–Ω–≤–µ—Ä—Å–∏—é; –≤—ã—Ö–æ–¥ –ø–æ–¥–∞—ë—Ç—Å—è –∫–∞–∫ `latents` –≤ –ª—é–±–æ–π –ø–∞–π–ø–ª–∞–π–Ω. |

---

## üìè –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

| –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å | –†–µ–∞–ª–∏–∑–∞—Ü–∏—è |
|-------------|------------|
| **Temporal consistency** | –ó–∞–ª–æ–∂–µ–Ω–æ –≤ UNet3D / motion module. –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –±–ª–æ–∫ `loss/temporal_consistency` –¥–ª—è –æ–±—É—á–µ–Ω–∏—è. |
| **Sliding window** | SubGraph `graph/sliding_window`: –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –≥—Ä–∞—Ñ ‚Äî –æ–¥–∏–Ω chunk; —Ü–∏–∫–ª –ø–æ –æ–∫–Ω–∞–º —Å –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ–º, —Å–∫–ª–µ–π–∫–∞ –ø–æ –º–∞—Å–∫–µ. –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫–∞–∫ –æ–¥–∏–Ω —É–∑–µ–ª –≤–º–µ—Å—Ç–æ –æ–¥–Ω–æ–≥–æ denoise_loop. |
| **Infinite length** | –¶–∏–∫–ª–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è: SubGraph —Å loop –ø–æ —á–∞–Ω–∫–∞–º –∏ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∫–∞–¥—Ä–æ–≤ –∫–∞–∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–ª—è —Å–ª–µ–¥—É—é—â–∏—Ö. |
| **Frame interpolation** | –ü–æ—Å—Ç–æ–±—Ä–∞–±–æ—Ç–∫–∞: –±–ª–æ–∫ `postprocess/frame_interp` (RIFE/FILM –∏ —Ç.–¥.) –ø–æ—Å–ª–µ codec. |
| **Batch processing** | –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π `batch_size` –≤ –≥—Ä–∞—Ñ–µ; Pipeline.__call__ —É–∂–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç. |
| **Custom frame count** | –í—Ö–æ–¥ –≥—Ä–∞—Ñ–∞ `num_frames`; –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ `_make_noise_video` –∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ latents. |
| **FPS control** | –ü—Ä–∏ —ç–∫—Å–ø–æ—Ä—Ç–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä –≤ `save_video_tensor`); –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –≤—Ö–æ–¥ `fps` –≤ –≥—Ä–∞—Ñ –≤—ã—Ö–æ–¥–∞. |
| **Latent mode** | –í—ã—Ö–æ–¥ `latents` —É–∂–µ —ç–∫—Å–ø–æ–Ω–∏—Ä—É–µ—Ç—Å—è; –º–æ–∂–Ω–æ –Ω–µ –ø–æ–¥–∫–ª—é—á–∞—Ç—å codec –∏ –æ—Ç–¥–∞–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –ª–∞—Ç–µ–Ω—Ç—ã. |

---

## üß™ –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (–±–ª–æ–∫–∏)

| –§—É–Ω–∫—Ü–∏—è | –†–µ–∞–ª–∏–∑–∞—Ü–∏—è |
|---------|------------|
| **Prompt Scheduling** | `conditioner/prompt_schedule`: –ø–æ —Ç–∞–π–º–∫–æ–¥–∞–º (–∏–ª–∏ –ø–æ –Ω–æ–º–µ—Ä–∞–º –∫–∞–¥—Ä–æ–≤) –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –ø—Ä–æ–º–ø—Ç, —ç–º–±–µ–¥–¥–∏–Ω–≥ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ loop. |
| **Value Scheduling** | –ë–ª–æ–∫ `scheduler/value_schedule`: –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (CFG, —à–∞–≥–∏, strength –∏ —Ç.–¥.) –∫–∞–∫ —Ñ—É–Ω–∫—Ü–∏–∏ –≤—Ä–µ–º–µ–Ω–∏/—à–∞–≥–∞; –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ denoise_loop –∏–ª–∏ –∫ guidance/solver. |
| **Context options** | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã LoopSubGraph: `context_length`, `context_overlap` –¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π. |
| **FreeInit** | –ë–ª–æ–∫ `noise/free_init` –∏–ª–∏ –æ–ø—Ü–∏—è –≤ `_make_noise_video`: –æ—Å–æ–±–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ª–∞—Ç–µ–Ω—Ç–æ–≤ –ø–µ—Ä–µ–¥ —Ü–∏–∫–ª–æ–º. –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –ø–µ—Ä–µ–¥ denoise_loop. |
| **Frame-wise control** | ControlNet/IP-Adapter –ø—Ä–∏–Ω–∏–º–∞—é—Ç —Ç–µ–Ω–∑–æ—Ä —Å —Ä–∞–∑–Ω—ã–º–∏ –∫–æ–Ω—Ç—Ä–æ–ª–∞–º–∏ –ø–æ –∫–∞–¥—Ä–∞–º (B,T,‚Ä¶); —É–∂–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç–∏, –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ ‚Äî –±–ª–æ–∫-–æ–±—ë—Ä—Ç–∫–∞. |
| **Motion hotswapping** | Backbone —Å —Ç–∏–ø–æ–º `backbone/unet3d_condition` –∏ —Å–ª–æ—Ç–æ–º `motion_adapter`; —Å–º–µ–Ω–∞ –≤–µ—Å–æ–≤ –±–µ–∑ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏ –≥—Ä–∞—Ñ–∞. |
| **Custom sampling** | –õ—é–±–æ–π —Å–æ–ª–≤–µ—Ä –∏–∑ `diffusion/solver/*` –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –≤ denoise_step; –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö ‚Äî —á–µ—Ä–µ–∑ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –±–ª–æ–∫–∞. |
| **Video loader** | –ë–ª–æ–∫ `io/video_loader`: –ø—É—Ç—å/URL ‚Üí —Ç–µ–Ω–∑–æ—Ä [B,C,T,H,W]; –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ codec.encode –∏–ª–∏ –∫ SparseCtrl. |

---

## üì¶ –≠–∫–æ—Å–∏—Å—Ç–µ–º–∞

| –≠–ª–µ–º–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å |
|---------|--------|
| **Diffusers** | –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —á–µ—Ä–µ–∑ `integration/diffusers.py`; –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑ HF. |
| **Export** | GIF, MP4, WebM, –∫–∞–¥—Ä—ã ‚Äî –≤ —É—Ç–∏–ª–∏—Ç–∞—Ö –ø—Ä–∏–º–µ—Ä–æ–≤ –∏ –≤ Gradio. |
| **Metadata** | –í –≥—Ä–∞—Ñ–µ `graph.metadata`; –ø—Ä–∏ —ç–∫—Å–ø–æ—Ä—Ç–µ –≤–∏–¥–µ–æ –º–æ–∂–Ω–æ –ø–∏—Å–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (–æ—Ç–¥–µ–ª—å–Ω–∞—è —É—Ç–∏–ª–∏—Ç–∞). |

---

## –ö–∞–∫ –ø–æ–¥–∫–ª—é—á–∞—Ç—å —á—Ç–æ —É–≥–æ–¥–Ω–æ –∫ –ª—é–±–æ–º—É –ø–∞–π–ø–ª–∞–π–Ω—É

1. **–ì—Ä–∞—Ñ** ‚Äî —ç—Ç–æ DAG —É–∑–ª–æ–≤ (–±–ª–æ–∫–æ–≤). –í—Ö–æ–¥—ã/–≤—ã—Ö–æ–¥—ã –≥—Ä–∞—Ñ–∞ = `expose_input` / `expose_output`.
2. **–î–æ–±–∞–≤–∏—Ç—å –∞–¥–∞–ø—Ç–µ—Ä** –∫ –ª—é–±–æ–º—É –≥—Ä–∞—Ñ—É —Å `denoise_loop`: `add_controlnet_to_graph(g)`, `add_ip_adapter_to_graph(g)`, `add_t2i_adapter_to_graph(g)`.
3. **–ó–∞–º–µ–Ω–∏—Ç—å –±–ª–æ–∫**: `graph.nodes["conditioner_0"] = BlockBuilder.build({...})` ‚Äî —Ç–æ—Ç –∂–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ—Ä—Ç–æ–≤.
4. **–ù–æ–≤—ã–π —Ä–µ–∂–∏–º (I2V/V2V)** ‚Äî –Ω–µ –Ω–æ–≤—ã–π –º–æ–Ω–æ–ª–∏—Ç–Ω—ã–π –ø–∞–π–ø–ª–∞–π–Ω, –∞ —Ç–æ—Ç –∂–µ –≥—Ä–∞—Ñ + –ø–µ—Ä–µ–¥–∞—á–∞ `latents` –∏–∑ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è/–≤–∏–¥–µ–æ (–≤ Pipeline –∏–ª–∏ –≤ –≥—Ä–∞—Ñ –Ω–∞–ø—Ä—è–º—É—é).
5. **Prompt Travel / Regional** ‚Äî –∑–∞–º–µ–Ω–∏—Ç—å —É–∑–µ–ª conditioner –Ω–∞ `conditioner/prompt_schedule` –∏–ª–∏ `conditioner/regional` –∏ –ø–æ–¥–∫–ª—é—á–∏—Ç—å —Ç–µ –∂–µ –ø–æ—Ä—Ç—ã.

–í—Å–µ –Ω–æ–≤—ã–µ –±–ª–æ–∫–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ `@register_block("type/name")` –∏ –º–æ–≥—É—Ç –±—ã—Ç—å —Å–æ–±—Ä–∞–Ω—ã –≤ —à–∞–±–ª–æ–Ω–∞—Ö —á–µ—Ä–µ–∑ `BlockBuilder.build({"type": "..."})`.
