# Combined pipeline: SD 1.5 txt2img -> img2img (TZ ยง6.1)
# Example: InferencePipeline.from_config("yggdrasil/configs/recipes/combined_t2i_img2img.yaml")
kind: combined_pipeline
name: combined_t2i_img2img
metadata:
  modality: image
  description: "Two-stage: txt2img then img2img refinement"

stages:
  - name: txt2img
    template: sd15_txt2img
  - name: img2img
    template: sd15_img2img

links:
  - [txt2img, decoded, img2img, source_image]

inputs:
  prompt: [txt2img, prompt]
  latents: [txt2img, latents]

outputs:
  latents: [img2img, latents]
  decoded: [img2img, decoded]

parameters:
  prompt:
    text: "a beautiful cat"
  num_steps: 28
  seed: 42
