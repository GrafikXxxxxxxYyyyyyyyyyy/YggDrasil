# Философия проекта Yggdrasil (Universe Generator 3.0)

**Назначение документа:** единый философский ориентир всей системы — от основания до высших представлений. Здесь собрана полная, глобальная и всеобъемлющая философская мысль проекта Yggdrasil: *зачем*, *почему*, *как* и *что именно* лежит в основе каждого уровня, каждой сущности и каждого взаимодействия.

**Статус документа.** Философия проекта на данный момент **полная и завершённая**, **замкнута с обеих сторон** (начальная граница снизу, вселенная и мета-пространство сверху). Документ **не подлежит изменению в будущем** и используется **исключительно как единственный идеологический ориентир (библия)** для построения проекта: канон, схема и код должны соответствовать философии; при противоречии пересматривается канон или реализация, а не философия.

**Архитектурный канон:** папка `../WorldGenerator_2.0/` — референс архитектуры; данный документ извлекает и систематизирует философию, заложенную в каноне, в единый связный текст.

**Язык:** русский.

**Движок Yggdrasil 0.3.0:** система работает не с графом, а с **гиперграфом**. Движок Yggdrasil версии 0.3.0 — это **гиперграф**; на каждом уровне иерархии структура представлена и исполняется как гиперграф (обычный граф — частный случай при гиперрёбрах размера 2).

---

## Введение. Гегелевское начало: бытие, ничто и становление

Философская мысль проекта опирается на гегелевскую логику начала. Ниже — как **бытие**, **ничто** и **синтез** (становление) из «Науки логики» соотносятся с идеей и устройством Yggdrasil.

### Бытие (Sein)

У Гегеля **бытие** — первая, самая бедная категория: чистая неопределённая **непосредственность**. «Бытие, чистое бытие, — без всякого дальнейшего определения». В нём ещё нет различий, определённости, содержания — только то, что оно **есть**. Это не «бытие чего-то», а бытие как таковое, пустая положенность. Всякое последующее определение (качество, количество, мера, сущность, понятие) будет **снятием** этого начала, но начало — именно оно: то, что **есть**, без вопроса «что именно».

В проекте **материальное начало** — блок (Abstract Base Block) — несёт момент **бытия** в том же смысле: то, что **есть** в системе. Блок хранит, несёт, вычисляет; он — носитель содержания (параметры, тензоры, состояние). Он не «обозначает» что-то иное — он **есть** то, что положено в узел гиперграфа. Без определения связей и места блок ещё не «в графе», но он уже **наличное бытие**: то, из чего всё собирается. Тем самым блок — **бытие** в гегелевском смысле начала: положенность, наличие, носитель, без чего нечего превращать и некуда помещать.

### Ничто (Nichts)

**Ничто** у Гегеля — столь же пустая категория. «Ничто, чистое ничто; оно есть простое равенство с самим собой, полная пустота, отсутствие определённости и содержания». Казалось бы, бытие и ничто противоположны; но как **чистые** они неразличимы: оба суть пустая непосредственность. «Бытие и ничто суть одно и то же». Различие — только в **направлении мысли**: бытие как «есть», ничто как «нет»; но содержательно оба лишены содержания. Из этого тождества бытия и ничто рождается **становление** (Werden): переход бытия в ничто и ничто в бытие — первое **конкретное** понятие, первое единство, в котором начало получает определение.

В проекте **идеальное начало** — узел гиперграфа (Abstract Graph Node) — несёт момент **ничто** в гегелевском смысле: у узла **нет своего содержания**. Он не хранит параметры и не вычисляет сам по себе; он задаёт только **место** и **связи**. Узел — это «пустая» форма: определение того, *как* блок встроен в целое, но не само содержание блока. Взятый отдельно от блока, узел есть чистая позиция, чистая связь — «ничто» в смысле отсутствия материального носителя. При этом без узла блок не был бы частью целого: **ничто** (форма, связь) и **бытие** (блок, содержание) в системе столь же нераздельны, как у Гегеля — бытие и ничто переходят друг в друга. Идея (узел) и материя (блок) различны по смыслу, но только вместе дают нечто определённое.

### Становление и синтез (Werden, Aufhebung)

**Становление** у Гегеля — «единство бытия и ничто»; «нераздельность бытия и ничто»; переход одного в другое. Оно **снимает** (aufhebt) оба момента: сохраняет их и поднимает на высший уровень. Становление — первая **конкретная** истина логики: не пустое бытие и не пустое ничто, а их движение, в котором возникает определённость.

В Yggdrasil **синтез** — это правило **«любой блок может стать узлом гиперграфа»** и сама **гиперграфовая структура**. Блок (бытие) и узел (ничто как чистая форма) не остаются двумя разрозненными началами: они **снимаются** в единстве «блок-в-узле». Гиперграф и есть это становление: материя получает место и связи (бытие переходит в форму), форма получает содержание (ничто переходит в бытие). Исполняемый гиперграф — не «сначала бытие, потом ничто», а **одно понятие**, в котором оба момента присутствуют только вместе. Тем самым проект не просто «использует» два начала — он строит онтологию по гегелевской логике начала: **бытие** (блок), **ничто** (узел как чистая определённость без своего носителя), **становление** (гиперграф и правило блок → узел). Идея и проект совпадают в этом пункте: основа системы есть философски осмысленное начало — от пустого бытия и пустого ничто к первому конкретному единству, в котором возникает вся последующая определённость (граф задачи, пайплайн, мир, вселенная).

### Начальная граница проекта: мысль автора и агентная среда

Философия проекта замыкается **и снизу**. Ниже первого уровня системы (блок, узел, гиперграф) лежит **начальная граница** — то, откуда проект начинается для автора и пользователя.

**Первичная идеальная сущность** в проекте — **философская мысль автора**: единственная и первая «идея», замысел, задумка; из неё вырастает взаимодействие вселенной (миры, вселенные, обмен). Мысль автора — не «ещё один блок», а **источник** того, что потом воплощается в конфигах, графах и мирах; она стоит по ту сторону начальной границы как **идеальное начало** в самом широком смысле.

**Материальная часть** на этой границе — **возможность реализовать свои идеи с помощью агентной среды**. Агентная среда — то, в чём идея обретает исполнение: блоки, узлы, инструменты, циклы «действие → наблюдение → ответ». Без агентной среды мысль остаётся только мыслью; с ней она становится графом, миром, вселенной.

**Пустая агентная среда** в этом смысле есть **чистое ничто** (в духе гегелевского Nichts): отсутствие идеи, пустая форма, ещё не заполненная замыслом. Как узел без блока — чистая позиция, чистая связь, — так и агентная среда до того, как в неё внесена мысль автора и расставлены блоки в нужных местах, есть **ничто**: отсутствие содержания, готовность принять его. Внести мысль «в нужные места» — значит собрать конфиг, зарегистрировать блоки, задать граф; тогда ничто обретает бытие, агентная среда наполняется, и возникает система (задача, мир, вселенная).

Тем самым **начальная граница проекта** закреплена: **идеальное** — философская мысль автора, единственная и порождающая взаимодействие вселенной; **материальное** — возможность реализации через агентную среду; **пустая агентная среда** — чистое ничто, отсутствие идеи, до внесения мысли в нужные места. Выше — вся иерархия от блока до вселенной; выше вселенной — реальный мир и взаимодействие пользователей, образующие мета-пространство (п. 1.9, 12.3). Философия проекта замкнута с обеих сторон.

---

## Часть I. Зачем и что: цель, имя, природа проекта

### 1.1 Зачем существует проект

Проект существует ради **максимальной свободы создания** при **единой и ясной основе**. Разработчики и пользователи должны иметь возможность собирать системы любой сложности — от одного блока до вселенной миров — не изобретая каждый раз новую онтологию: всё опирается на одни и те же фундаментальные сущности и принципы. Система является одновременно **конструктором** (всё собирается из блоков) и **средой с идеей** (связи и композиция подчиняются единой философии и правилам преобразования). Таким образом, Yggdrasil — не только Lego-конструктор, но и **многомерный гиперграф**, в котором на каждом уровне сущности одновременно материальны и идеальны; их природа проявляется **во взаимодействии идеи с материей и материи с идеей**. Проект нацелен на **предельную гибкость и масштабируемость решений**: на каждом шаге, на каждой стадии, на каждом уровне — от обучения моделей до сборки сценариев — должна быть возможность **полной и глубокой настройки** без искусственных ограничений.

### 1.2 Универсальность абстракции: от конкретных решений к устройству любой сложной системы

Yggdrasil **выходит за рамки конкретных решений** и поднимается до уровня **абстракции целой вселенной**. Одна и та же философская позиция призвана описывать **устройство любой сложной системы** — вплоть до **модели вселенной**: один фундамент (блок, узел, гиперграф, синтез материи и идеи), одна иерархия уровней (граф → пайплайн → переход → мир → вселенная), одни принципы превращений и связей. Не «ещё один фреймворк под задачу X», а **единая онтология**, в которой и одна задача (text-to-image), и цепочка миров, и сообщество вселенных суть частные случаи одной и той же структуры. Тем самым проект претендует не на узкую область применимости, а на **универсальность описания**: от минимального исполняемого графа до модели вселенной — одна мысль, одна форма, одна философия.

### 1.3 Три столпа: простота запуска, всеобщая сериализация, абсолютная свобода настройки

Проект сочетает три нераздельных требования.

**Максимальная простота использования.** Буквально **всё** должно быть запускаемо за **минимум кода** — в идеале за **три–пять строк**: создание графа, пайплайна, этапа или мира с полной **автоматизацией согласования** (порты, типы, связи выводятся из спецификаций) и с **простотой**, не требующей от пользователя погружения во внутреннее устройство, если он того не хочет. Один и тот же сценарий — от одной задачи до целого мира — должен собираться и запускаться с минимальным boilerplate.

**Всеобъемлющая сериализация.** На каждом уровне — конфиг структуры и чекпоинт весов; возможность сохранить и загрузить блок, граф, пайплайн, этап, мир, вселенную. Сериализация **объединяет** огромную мощь и многофункциональность решения: сложнейшие конфигурации и обученные модели становятся воспроизводимыми артефактами, переносимыми между средами и сценариями. Ничто не «теряется» между запусками: всё, что можно описать и обучить, можно сериализовать.

**Абсолютная свобода настройки.** При этом система должна поддерживать **абсолютно произвольную** кастомизацию. **Любая** нейросетевая архитектура, **любая** ненейросетевая архитектура; **любые** задачи и **любые** комбинированные сценарии; **любые** переходы состояний; **любые** самые смелые фантазии по устройству мира; **любое** взаимодействие в сообществе пользователей и миров. Никаких «разрешённых» и «запрещённых» вариантов — только контракт (порты, run, сериализация) и совместимость типов. Противоречие между «запуск в три строки» и «абсолютная свобода» снимается единой основой: простой путь — это разумные умолчания и автоматическое согласование; сложный путь — явная сборка из тех же блоков и тех же правил. Один фундамент обслуживает и быстрый старт, и предельную кастомизацию.

### 1.4 Minecraft в мире программирования — но больше

В духе этой двойной цели проект можно охарактеризовать так: **Yggdrasil стремится быть «Minecraft в мире программирования» — но больше**. Как Minecraft даёт конечный набор правил и блоков, из которых игрок может собрать что угодно — от хижины до логической схемы и целого мира, — так и Yggdrasil даёт конечный набор абстракций (блок, узел, гиперграф, уровни иерархии), из которых можно собрать **что угодно**: одну модель, пайплайн, интерактивный мир, вселенную миров, сообщество с обменом и влиянием. «Больше» — потому что система не ограничена игровым миром: она поднимается до уровня **модели вселенной** и **универсальной философской позиции** об устройстве сложных систем; сериализация, обучение на всех уровнях и единый контракт делают собранное не только «поиграть», но и **сохранить, обучить, масштабировать и комбинировать** в любых сценариях.

### 1.5 Песок в бесконечной пустыне: единственное ограничение — фантазия

Фреймворк предлагает пользователю и разработчику **песок в бесконечной пустыне**. В этой пустыне пользователь или разработчик **свободен создавать любые формы, образы, фигуры** — от простой «курицы» до целых песчаных городов; всё, на что хватает фантазии. **Единственное ограничение — сама фантазия.** Фреймворк не предписывает «допустимые» сценарии: он даёт **мощный движок** для воплощения **любых идей и фантазий** разработчиков и пользователей. Задача системы — не сужать выбор, а предоставить **все возможности** в рамках одной основы: один контракт, одна философская мысль, одна структура (гиперграф, блок, узел), из которых собирается бесконечное разнообразие. Так и должно быть: фреймворк — это не набор готовых решений, а **среда полной свободы реализации** при неизменной основе.

**Пользователь и разработчик — первый класс.** Проектирование явно ставит **пользователя и разработчика в центр**: система существует ради их идей и фантазий, а не наоборот. Не «подстройка под фреймворк», а **фреймворк как служба** их замыслам; не система диктует границы, а пользователь определяет, что строить в данной ему пустыне. Тем самым «песок в пустыне» и «единственное ограничение — фантазия» закрепляются как принцип: человек (разработчик, автор мира, участник сообщества) — первичен; движок и онтология — инструмент.

### 1.6 Полная кастомизируемость без изменений движка

**Полная кастомизируемость** означает, что пользователь может **придумать любую модель**, **любую задачу**, **любую цепочку задач**; может **менять последовательность переходов** и **сами переходы**; может **менять взаимодействие между мирами**. Полная свобода реализации — при этом **без каких-либо изменений в движке фреймворка**, в его основе, сути и философской мысли. Инструменты фреймворка (реестр типов блоков, контракт портов и run, возможность регистрировать свои узлы-задачи, свои переходы, свои правила обмена между мирами) должны **давать возможность кастомной реализации всего** — любой модели, любого сценария, любой логики переходов и любого взаимодействия миров — **исключительно через реализацию контракта и регистрацию**, без правок ядра, без структурных инъекций в движок, без «манипуляций» с фреймворком. Никаких хаков, никакого форка движка ради новой идеи: **фреймворк изначально предоставляет все возможности**. Если пользователю нужно что-то новое — он реализует блок или переход по тому же контракту и добавляет его в реестр; основа и философия остаются нетронутыми. Движок остаётся **неизменным**; меняется только множество зарегистрированных реализаций и собранные из них конфигурации. **Расширяемость только через контракт:** форк ядра **не считается допустимым способом расширения** в рамках философии проекта; единственный законный путь — реализация контракта и регистрация. Тем самым граница между «расширить систему» и «заменить систему» закреплена: расширение — всегда **внутри** данной основы. В этом смысл «песочницы» и «Minecraft»: мощный двигатель уже заложен в основу; пользователь творит **внутри** данной ему пустыни песка, не пытаясь перестроить сам песок.

### 1.7 Что такое «мир» в проекте

**Мир** в проекте — это не метафора интерфейса, а **непрерывная цепь крупномасштабных переходов**: последовательность фаз (Философ → Автор → Среда → Архитектор → Творец), в каждой из которых состояние системы претерпевает **метаморфозу** — фундаментальное превращение (материя в идею, идея в материю, объект в объект). Мир один; он обновляется применением состояния (state), а новое состояние порождается внутри цикла (Development of the world). Мир может развиваться **сам**, итеративно, без обязательного участия пользователя. Выше мира в расширении стоит **Вселенная** — гиперграф миров, предназначенный в первую очередь для **сообщества**: сравнение миров, развитие через взаимодействие персонажей и миров, обмен, группы миров, творческое и деструктивное влияние на экосистему.

### 1.8 Почему имя Yggdrasil

В скандинавской мифологии **Иггдрасиль** — мировое древо, соединяющее и поддерживающее **несколько миров (реальмов)**. В проекте уровень **Вселенная** — это гиперграф миров: узлы = миры, гиперрёбра = связи между мирами; счёт миров (count of worlds) — число «реальмов» на древе. Один мир — один цикл переходов (один «реальм»); вселенная — целое древо таких миров. Корни и ветви мифа соответствуют рёбрам графа; колодец Урд — общему контексту или хранилищу; обмен между мирами — движению сущностей по рёбрам. Имя закрепляет не только техническую структуру, но и **философскую**: система есть древо, на котором растут миры и связи между ними.

### 1.9 Граница системы: что внутри и что снаружи

**Внутри системы** — всё, что подчиняется единому контракту и живёт в реестре: блоки, узлы, гиперграфы, пайплайны, переходы, миры, вселенные. Граница задаётся не «железным забором», а **контрактом**: если сущность объявляет порты, реализует run и сериализуется по правилам — она внутри. **Снаружи** — пользователь как со-автор (Action, опциональный ввод), внешние API (LLM, VLM, сервисы по API), вики-ресурсы (Fandom, Wikipedia), любые источники контекста. Система **проницаема** на границе: внешнее входит через те же порты и контракты (блок через API, мир из вики); при этом основа, движок и философская мысль не размываются — внешнее **встраивается** в онтологию системы, а не подменяет её. Тем самым граница — не стена, а **место соединения**: снаружи — свобода ввода и источников; внутри — единые правила и исполняемая структура.

**Граница «система / использование системы».** Онтология проекта **заканчивается на вселенной** (высший уровень). Всё, что за пределами гиперграфа миров и эфира вселенной — единая площадка публикации, сообщество пользователей, реальный мир, взаимодействие людей — есть **использование системы**, а не следующий уровень графа. Система **предоставляет** вселенные и миры; то, как люди их публикуют, исследуют и объединяют, живёт **вне онтологии** — в человеческом сообществе и на платформе. Тем самым граница между «системой Yggdrasill» и «использованием системы» закреплена явно: не размывать её — часть философии проекта.

### 1.10 Чего система сознательно не делает

Система **не скрывает магии** поверх контракта: нет неявных «особых» путей, нет жёсткой привязки к одному провайдеру, формату или семейству моделей. **Нет привязки к вендору**: ни к одному провайдеру API, ни к одному формату чекпоинта, ни к одному форку фреймворка — любой блок, любой источник заменяем при соблюдении контракта. Всё расширяемо и заменяемо через реализацию контракта и регистрацию. Нет нужды во **взломах ядра**, структурных инъекциях или форке движка ради новой идеи — фреймворк изначально предоставляет все возможности. Эта **сдержанность** усиливает «песок в пустыне» и «без изменений движка»: пользователь творит в рамках одной основы, а основа остаётся минимальной и прозрачной.

### 1.11 Эволюция канона при неизменной философии

**Философия как якорь.** Данный документ задаёт **устойчивый** ориентир: принципы двух начал, синтеза, гиперграфа, Lego, иерархии уровней, границы системы и полной кастомизируемости не зависят от конкретных реализаций. Они формулируют *зачем* и *почему*; техническое *как* живёт в каноне (Scheme, уровни, форматы, реестры).

**Канон может эволюционировать.** Схемы мира, описание уровней, форматы конфигов и чекпоинтов, перечень абстрактных узлов-задач — всё это **канон**, а не философия. Канон развивается: уточняются контракты, добавляются уровни или сущности, меняются форматы сериализации. Такая эволюция допустима и ожидаема, пока она **не противоречит** философии.

**Порядок при противоречии.** Если новая идея или реализация вступает в конфликт с каноном или с философией, сначала пересматривается **канон** (схемы, документы уровней), а не ядро движка под частный случай. Если конфликт касается самих принципов (например, единства контракта или минимализма фундамента), тогда обсуждается обновление **философии** — редкое и обоснованное. Ядро движка не «подлагивается» под исключения: либо новая идея вписывается в контракт и реестр, либо канон и философия явно развиваются, сохраняя одну мысль.

**Обратная совместимость при эволюции.** Эволюция канона (контракты, форматы, уровни) по возможности **сохраняет обратную совместимость**: старые артефакты (конфиги, чекпоинты, миры) остаются загружаемыми и воспроизводимыми. Если вносятся несовместимые изменения, они **явно версионируются** (формат, мажорная версия контракта); миграция и поддержка старых версий задаются каноном, а не скрытой «поломкой» прошлого. Тем самым эволюция не отменяет воспроизводимость: пользователь может опереться на любую зафиксированную версию.

**Итог:** философия остаётся **якорем**; канон — **живым** воплощением этой мысли во времени; движок — **минимальным** и неизменным по сути. Так проект сохраняет одну мысль при меняющемся мире требований и реализаций.

### 1.12 Единый язык для всех уровней

У проекта **один словарь** на всех уровнях: **блок**, **узел**, **порт**, **run**, **гиперграф**, **гиперрёбра**, **переход**, **state**, **мир**, **вселенная**, **контракт**, **сериализация**, **чекпоинт**. Эти термины не меняют смысла при переходе от графа задачи к пайплайну, этапу, миру или вселенной: на каждом уровне есть «узлы», «то, что течёт по связям», «выполнение». Нет отдельного жаргона для «графа», «мира» или «вселенной» — одна и та же языковая рамка.

**Зачем это нужно.** Единый язык — часть **общей мысли**: упрощает рассуждение, проектирование и коммуникацию. Разработчик, переходя с уровня задачи на уровень мира или вселенной, не переключается на другую онтологию и другую терминологию; документы канона и философия говорят на одном языке. Стыковка уровней (например, «мир как гиперграф переходов», «вселенная как гиперграф миров») становится естественной, потому что **гиперграф**, **узел** и **поток** означают одно и то же на всех этажах иерархии. Тем самым язык не только описывает систему — он **удерживает** её как одну мысль от основания до вселенной.

### 1.13 Разные уровни экспертизы при единой онтологии

Система рассчитана на **разные уровни экспертизы** — от быстрого старта («три строки», разумные умолчания) до глубокой кастомизации (явная сборка блоков, свои переходы, свои миры). Переход от простого к сложному происходит **без смены онтологии**: один и тот же блок, узел, гиперграф, контракт; пользователь углубляется в те же сущности, а не переключается на «продвинутую подсистему». Тем самым принцип закреплён: **инклюзивность по уровню входа** — и новичок, и эксперт работают в рамках одной основы; система не требует от пользователя больше, чем нужно для выбранного им уровня, но и не ограничивает того, кто хочет опуститься до фундамента или подняться до вселенной.

### 1.14 Этика и ответственность: минимальный принцип

Проект **признаёт этическое измерение**: влияние контента, миров и системы на пользователей и сообщество не игнорируется. Философия **не предписывает** конкретную этику или кодекс поведения; закрепляется минимальный принцип: тема **входит в рамки проекта** как возможность явного обсуждения и реализации (например, политики контента, происхождение артефактов, доверие — п. 10.17), а не объявляется «вне зоны внимания». Конкретные решения остаются за каноном, сообществом и авторами; философия лишь фиксирует, что **ответственность и этика не выносятся за скобки** онтологии и целей Yggdrasill.

### 1.15 Открытый доступ сообществу и воспроизводимость экспериментов

Проект **рассчитан на открытый доступ сообществу**: код, канон и артефакты предназначены для того, чтобы сообщество могло использовать, развивать и расширять систему без искусственных барьеров. Открытость — не только техническая (контракт, сериализация, реестр), но и **доступность** для воспроизведения и участия. **Воспроизводимость экспериментов** закреплена как цель: конфиг + чекпоинт + входы задают **воспроизводимый эксперимент** — любой сценарий (от одного блока до мира или вселенной) может быть повторён в той же или другой среде, сравнён с другими результатами и положен в основу исследований и сравнения решений. Тем самым открытый доступ и воспроизводимость экспериментов суть часть философии проекта: система существует не только «для себя», но и **для сообщества** и для **повторяемой проверки** любых утверждений и конфигураций.

---

## Часть II. Два начала: материальное и идеальное

### 2.1 Разделение двух начал

Вся система держится на двух взаимосвязанных началах:

| Начало | Сущность в проекте | Смысл |
|--------|--------------------|--------|
| **Материальное** | То, что **хранит** и **несёт**: параметры, тензоры, ссылки, данные, веса, конфигурацию, состояние. Всё, что можно назвать «носителем». | Материя — то, из чего собирается система и что передаётся по цепочкам. |
| **Идеальное** | То, что задаёт **связи**, **порядок** и **логику превращения** материальных сущностей в элементы целого. Упорядочивание блоков в граф, правила соединения, семантика узлов и рёбер. | Идея — форма, в которую складывается материя; логика преобразования блока в узел графа. |

Без материи нечего выполнять; без идеи нет структуры и связей. Оба начала необходимы и работают только вместе.

### 2.2 Воплощение в фундаменте

- **Материальное** воплощается в **блоке** (Lego-кирпиче): нечто, что можно положить в граф и соединить с другим; оно хранит и вычисляет.
- **Идеальное** воплощается в **узле графа** и в **логике превращения**: любой блок может стать узлом; сама эта возможность и правила превращения и есть идеальная составляющая.

Вся архитектура замкнута на этом разделении: с одной стороны — единый материальный «атом» (базовый блок), с другой — единая идеальная «форма» (узел гиперграфа и правило: блок → узел).

### 2.3 Гегелевская аналогия: тезис, антитезис, синтез

Описание двух начал и пары Abstract Base Block / Abstract Graph Node можно упорядочить по аналогии с **философией Гегеля** и понятием **синтеза**.

- **Тезис (положительный момент):** **Abstract Base Block** — материальное начало. Блок есть «положительное» в смысле наличного бытия: то, что *есть*, что хранится и выполняется, что обладает содержанием (параметры, тензоры, состояние). Это момент **положенности** (Gesetztsein) материи в системе.
- **Антитезис (отрицательный момент):** **Abstract Graph Node** — идеальное начало. Узел есть «отрицательное» в смысле определения и границы: он не хранит содержание, а задаёт **место** и **связи**; он определяет, *как* блок встроен в целое. Это момент **опосредования** (Vermittlung), форма, в которую материя должна войти.
- **Синтез (снятие — Aufhebung):** Правило **«любой блок может стать узлом гиперграфа»** и сама **гиперграфовая структура** системы суть **синтез** двух моментов. В гегелевском смысле синтез не уничтожает тезис и антитезис, а **снимает** их: сохраняет и поднимает на высший уровень. Гиперграф — это целое, в котором блок (материя) и узел (идея) существуют только вместе: блок получает положение и связи (идеальную форму), узел получает содержание (материю в себе). **Сущность понятия** здесь — единство материального и идеального в единой исполняемой структуре; синтез и есть эта **конкретность** (das Konkrete): не «сначала блок, потом узел», а одна сущность «блок-в-узле» в составе гиперграфа.

Таким образом, два начала не просто сосуществуют — они **снимаются в синтезе**: гиперграф как движок и правило «блок → узел» суть то понятие (Begriff), в котором материальное и идеальное достигают своего единства.

### 2.4 Аналогия с фермионами и бозонами

На фундаментальном уровне допустима **аналогия с двумя классами элементарных частиц**:

| В физике | В Yggdrasil | Смысл аналогии |
|----------|-------------|----------------|
| **Фермионы** (носители вещества) | **Abstract Base Block** | «Частицы вещества»: то, что хранится и переносится по системе; носители параметров, тензоров, состояния. |
| **Бозоны** (переносчики взаимодействия) | **Abstract Graph Node** (и гиперрёбра гиперграфа) | «Переносчики взаимодействия»: то, что задаёт связи и обмен; узел задаёт положение и связи блока с другими блоками, не храня содержимое сам. |

Логика «блок → узел» аналогична тому, что «вещество» помещается в поле взаимодействий: материя получает положение и связи, не переставая быть носителем содержания.

---

## Часть III. Фундамент: блок, узел и правило превращения

### 3.1 Abstract Base Block — материальное начало

**Определение.** Абстрактный базовый блок — **минимальная единица** системы: то, что что-то хранит и что-то вычисляет. Любой объект в проекте может быть представлен как базовый блок или обёрнут в него.

**Что блок хранит (материальное содержание):**

- **Параметры и конфигурация:** конфиг, гиперпараметры, идентификаторы (`block_id`, `block_type`).
- **Тензоры и веса:** обучаемые веса, кэш, промежуточные данные.
- **Ссылки:** на другие блоки, ресурсы, граф.
- **Состояние:** всё, что нужно для воспроизводимости, сохранения и загрузки (state_dict, конфиг при сохранении).

**Контракт блока:** объявление интерфейса (входы/выходы — порты); выполнение по входам → выходы; идентификация (`block_type`, `block_id`). Блок — **атом сборки**: модели, кодекы, солверы, пайплайны в основе суть базовые блоки или композиции блоков. Ничего материального в системе нет вне блоков.

### 3.2 Abstract Graph Node — идеальное начало

**Определение.** Абстрактный узел в гиперграфе — **место** или **роль** в гиперграфе, которому может соответствовать **любой** абстрактный базовый блок. Узел не хранит материю сам: он задаёт **положение** и **связи** (гиперрёбра к другим узлам).

**Что задаёт узел (идеальное содержание):**

- **Положение в гиперграфе:** имя узла, уникальность.
- **Связи с другими узлами:** входящие и исходящие гиперрёбра (источник_узел, источник_порт) → (этот_узел, порт); порядок и направление потоков; гиперрёбра могут связывать более двух узлов (групповые связи).
- **Семантика портов на уровне гиперграфа:** какие порты блока «торчат наружу», участие во входах/выходах гиперграфа.

Узел задаёт **как блок встроен в целое**. Целое — гиперграф; идея целого — связи и порядок.

### 3.3 Правило «блок → узел» и синтез: единство уровня

- **Правило:** **любой Abstract Base Block может быть превращён в узел гиперграфа** (помещён в гиперграф как узел с именем и гиперрёбрами). Материя получает идеальную форму (место и связи), не переставая быть блоком. В гегелевских терминах это и есть **синтез**: снятие (Aufhebung) тезиса (блок) и антитезиса (узел как форма) в единое понятие «блок-в-узле».
- **Система как целое:** **гиперграф**, узлы которого содержат блоки; гиперрёбра задают потоки данных между портами блоков (и при необходимости групповые связи). Содержимое узлов — материя (блоки); структура гиперграфа — идея (узлы, гиперрёбра, порядок). Фундаментальный уровень не ставит одно выше другого: оба начала необходимы и **снимаются в синтезе** — в исполняемом гиперграфе как конкретном единстве материального и идеального.

### 3.4 Порты, композиция, жизненный цикл и исполнение

**Порты** — это **граница** блока: объявление того, что блок принимает и отдаёт, **без привязки к конкретному гиперграфу**. Блок не знает, откуда придут данные и куда уйдут — только имена и типы портов. Философски порты суть **идеальный момент материального блока**: контракт как форма, делающая блок **соединимым** с целым. Совместимость типов при соединении — условие **возможности** связи; валидация гиперграфа проверяет, что идеальная структура **реализуема** (согласована), прежде чем исполнение сделает её актуальной. **Внешние входы и выходы** гиперграфа (exposed inputs/outputs) — порты узлов, выведенные к границе целого; та же логика «блок открыт вовне через порты» поднимается до уровня графа и пайплайна.

**Композиция:** блок может **внутри себя** содержать другие блоки (подблоки); снаружи он по-прежнему соблюдает контракт Abstract Base Block. Вся материя внутри него — снова блоки. Тем самым **онтология рекурсивна**: «атом» может быть составным; один и тот же принцип (хранить + выполнять, порты + run) действует на любом масштабе. Это не отмена фундамента, а его **самоподобие**: единство материи и идеи воспроизводится внутри блока как внутренний подграф или пайплайн.

**Состав как главная операция.** Вся система строится **составлением**: блоки собираются в граф, графы — в пайплайн, пайплайны — в переход, переходы — в мир, миры — во вселенную. Нет «особого» пути создания сущности — только контракт и **композиция** (размещение в узле, соединение портов, регистрация). Любое новое целое есть результат сложения уже заданных единиц по правилам гиперграфа. Тем самым **состав** — не один из приёмов, а **главная операция**: ничего не создаётся «из ничего» движком; всё собирается из блоков и связей.

**Жизненный цикл** блока: создание (по конфигу, с block_type и block_id) → размещение в узле гиперграфа → выполнение (исполнитель подаёт данные на порты, вызывает run, забирает выходы) → сохранение/загрузка. **Исполнение** — это **актуализация** структуры: гиперграф как идеальная форма «происходит» во времени, когда исполнитель обходит узлы и вызывает блоки; без run структура лишь возможна, с run она **осуществляется**. Реестр типов (block_type → класс реализации) связывает **имя** (идея, понятие) с **реализацией** (материя); один и тот же block_type может быть инстанцирован во многих узлах — множество экземпляров при единстве понятия.

### 3.5 Минимализм фундамента

Фундамент намеренно **минимален**: блок (хранить + вычислять), узел гиперграфа (место + связи), правило «блок → узел», сама структура гиперграфа. Всё остальное — граф задачи, пайплайн, переход, мир, вселенная — **надстройка**, а не новые онтологии: те же сущности и те же принципы повторяются на каждом уровне. Одна мысль, один фундамент — бесконечное разнообразие решений. Минимализм гарантирует, что система не обрастает «особыми случаями» в ядре: любая новая возможность вводится как комбинация или специализация уже заданного.

### 3.6 Минимальная поверхность движка

Поверхность движка — то, с чем взаимодействуют пользователь и код, — **минимальна**: **run** (выполнение по входам → выходы), **порты** (объявление и соединение), **конфиг** и **чекпоинт** (создание, сохранение, загрузка). Всё остальное — композиция блоков в гиперграфы, регистрация типов, сборка уровней — строится **поверх** этой поверхности без добавления новых примитивов в ядро. Движок не «знает» о пайплайнах, мирах или вселенных как об особых сущностях: он знает только гиперграф узлов с блоками и правила обхода. Тем самым **минимальная поверхность** дополняет минимализм фундамента: мало не только понятий, но и точек соприкосновения с системой; всё расширяемое — через контракт и реестр, а не через новые вызовы ядра.

### 3.7 Рекурсия и глубина композиции: поддерживаемая возможность

Система **должна поддерживать** произвольную глубину композиции: блок может содержать подблоки, те — следующие подблоки; граф может быть узлом пайплайна, пайплайн — узлом перехода и т.д. **Рекурсия и бесконечная глубина** — это **возможность**, которую фреймворк предоставляет; пользователь не обязан ею пользоваться. Простые сценарии (один граф, один мир без вложенных миров) остаются столь же законными. Тем самым «блок внутри блока», «граф внутри графа» и при расширении «мир внутри мира» — **поддерживаемые, но не обязательные** варианты; онтология допускает их без предписания сложности.

### 3.8 Минимализм и отказ от раздувания

Система **не вводит сущности и уровни «на всякий случай»**: каждая сущность и каждый уровень обоснованы философией и каноном. **Отказ от раздувания** (no bloat) — принцип: не добавлять в онтологию то, без чего можно обойтись комбинацией уже заданного; не создавать «специальные» пути и «удобные» надстройки, размывающие единую основу. Вселенная — высший уровень именно потому, что выше неё уровня не требуется; минимализм фундамента (п. 3.5) и минимальная поверхность движка (п. 3.6) дополняются **минимализмом онтологии в целом**: ничего лишнего в ядре, в уровнях и в понятиях. Тем самым проект избегает feature creep и сохраняет одну мысль без раздувания.

---

## Часть IV. Принцип Lego: свобода и единая основа

### 4.1 Суть принципа

Вся система должна быть **Lego-подобной** и собираться как конструктор.

- **Любой блок с любым блоком.** Совместимость определяется портами и типами, а не фиксированным списком связей.
- **Абсолютная гибкость сборки.** Порядок и количество блоков не предписаны сверху.
- **Реальная песочница.** В рамках правил графа (совместимость портов, направление потоков) всё можно соединять со всем.
- **Полноценный конструктор.** Максимальная свобода: свои блоки, свои типы узлов, свои правила преобразования **без переписывания ядра**. Любая модель, любая задача, любая цепочка задач, любая последовательность или набор переходов, любое взаимодействие между мирами реализуются **внутри** фреймворка — через реализацию контракта и регистрацию, без изменений движка, основы и философской мысли.

Итог: **максимальная свобода** при **единой основе** — материальный блок и идеальная логика «блок → узел гиперграфа»; движок предоставляет все возможности, пользователь ничего не допиливает в ядре.

### 4.2 Масштаб в ширину

Свобода касается не только **глубины** (рекурсия, блок в блоке), но и **ширины**: число типов блоков, размер графа (число узлов), число пайплайнов в этапе, число миров во вселенной **не ограничены онтологией**. Фреймворк должен поддерживать сколь угодно много зарегистрированных типов, сколь угодно большие гиперграфы и сколь угодно много миров — в пределах ресурсов (память, время) и фантазии пользователя. Ограничение задаётся не «максимум N узлов» или «только такие блоки», а **контрактом и совместимостью портов**. Тем самым масштаб в ширину — не особый режим, а прямое следствие единой основы: одна и та же форма допускает и минимальный граф из двух узлов, и вселенную из множества миров.

### 4.3 Уровень над фундаментом: абстрактные узлы-задачи

Сразу над фундаментом (блок и узел) располагается уровень **абстрактных узлов-задач** — уровень **сугубо абстрактный**: здесь нет исполняемых экземпляров, только **спецификации** и **роли**. К этому уровню относятся Abstract Backbone, Abstract Solver, Abstract Codec, Abstract Adapter, Abstract Conditioner, Abstract Tokenizer, Abstract Guidance, Abstract Agent и др. Каждая такая сущность **одновременно** наследует Abstract Base Block и Abstract Graph Node и задаёт **спецификацию задачи** — фиксированную роль в гиперграфе, контракт портов (имена, типы, направление), семантику выполнения (что происходит при run) и типичные связи с другими типами узлов. На уровне над фундаментом **не вводятся новые независимые сущности**: каждая абстракция есть **ограничение и специализация** пары (Block, Node). Узел — не «просто узел», а узел типа «backbone», «solver», «codec»; блок внутри такого узла — не «просто блок», а блок, реализующий соответствующую задачу. Конкретные реализации (UNet2D, DDIMSolver, VAE, LoRA, CLIP и т.д.) — это уже **экземпляры**, которые появляются на следующем уровне, при сборке исполняемого гиперграфа.

### 4.4 Аналогия: абстрактные понятия и конкретные решения

Уровень абстрактных узлов-задач можно уподобить **набору абстрактных понятий** (или «ролей»), из которых затем собирается любое конкретное решение:

- **Абстракции** — это конечный перечень **типов** (Backbone, Solver, Codec, Conditioner, Tokenizer, Adapter, Guidance, Agent, …). Каждый тип задаёт только **что** должно быть (контракт портов, семантика), а не **как** именно реализовано (какая архитектура, какие веса).
- **Конкретная реализация** — выбор одной из возможных «наполнений» абстракции (например, Backbone → UNet2D или DiT; Solver → DDIM или Euler). Гиперграф собирается из **экземпляров** таких реализаций, соединённых по портам согласно контрактам абстракций.

**Ключевой принцип:** из **конечного набора абстрактных сущностей** (узлы-задачи) можно собрать **любую конкретную решаемую задачу** — text-to-image, image-to-video, upscale, распознавание, агентный цикл с инструментами и т.д. Конечность набора абстракций не ограничивает разнообразие решений: комбинация ролей, порядок соединения и выбор конкретных реализаций (UNet, VAE, DDIM, …) дают неограниченное множество конкретных гиперграфов. Аналогия: из конечного алфавита можно составить бесконечно много слов; из конечного набора абстрактных ролей (Backbone, Solver, Codec, …) — бесконечно много конкретных пайплайнов и миров. Узлы «знают» свою роль; типичные связи выводятся из типа узла-задачи, поэтому сборка гиперграфа задачи (например, text-to-image) сводится к добавлению нужных узлов и при необходимости явному связыванию портов — в несколько строк или из конфига.

### 4.5 Двойное наследование: одна сущность как материя и форма

Узлы-задачи (Abstract Backbone, Solver, Codec, Adapter, Conditioner, Tokenizer, Guidance и т.д.) **одновременно наследуют** Abstract Base Block и Abstract Graph Node. То есть **одна и та же сущность** в системе выступает и как **блок** (хранит параметры, веса, выполняет вычисления), и как **узел** (задаёт положение и связи в гиперграфе). Философски это — **тождество материи и формы в одном понятии**: не «сначала блок, потом его помещают в узел», а **одно понятие**, в котором момент хранения и вычисления (материя) и момент места и связей (идея) неразделимы. Двойное наследование есть онтологическое утверждение: на уровне задач **атом сборки** уже не «чистый блок» и не «чистый узел», а **блок-как-узел** — синтез, закреплённый в самой типологии (каждый узел-задача по определению и блок, и узел). Тем самым принцип синтеза (часть II–III) поднимается на уровень абстракций: Backbone, Solver, Codec и т.д. суть **конкретные понятия**, в которых материальное и идеальное даны в одном типе сущности.

---

## Часть V. Иерархия уровней: от задачи до вселенной

### 5.1 Общая схема

Мы работаем **не с графом, а с гиперграфом**. На каждом уровне структура устроена как **гиперграф** (обычный граф — частный случай при гиперрёбрах размера 2). Единая модель движка от блока до вселенной — гиперграф.

| Уровень | Состоит из | Что передаётся по связям |
|---------|------------|---------------------------|
| **Граф** | Узлов-задач (Backbone, Solver, Codec, Conditioner, Tokenizer, …) | Данные между портами узлов. **Одна цельная задача** (text-to-image, upscale, image-to-video и т.д.). |
| **Пайплайн** | Целых графов (один или несколько) | Данные между графами. **Комбинированные задачи** (текст → картинка → апскейл → видео). Пайплайн может состоять из одного графа. |
| **Переход (Stage)** | Пайплайнов | **Stage — гиперграф пайплайнов**, реализующий **один переход** (метаморфозу state). Между переходами в мире передаётся **state**. |
| **Мир (World)** | Переходов | **Мир — цепочка переходов.** Узлами мира являются переходы (Философ, Автор, Среда, Архитектор, Творец); по рёбрам передаётся state. Циклический граф. |
| **Вселенная (Universe)** | Миров | **Граф миров.** Узлы = миры, рёбра = связи между мирами; обмен по payload_spec (в т.ч. сущности с состоянием). Счёт миров (count of worlds). |

**Уровни как виды одной идеи.** Каждый уровень — не «другая онтология», а **вид одной и той же идеи**: гиперграф чего-то, по чему течёт что-то. На уровне задачи — гиперграф узлов-задач, поток данных; на уровне пайплайна — гиперграф графов, поток данных между задачами; на уровне мира — гиперграф переходов, поток state; на уровне вселенной — гиперграф миров, поток обмена. Меняется только **масштаб** (что является узлом, что течёт по рёбрам); **форма** (гиперграф, порты, run, порядок) одна. Тем самым уровни — не разнородные «этажи», а **одна мысль**, увиденная с разной высоты: единство онтологии сохраняется.

### 5.2 Первый исполняемый уровень — гиперграф задачи

Ниже уровня «гиперграф задачи» — только спецификации (абстракции блоков и узлов-задач). **Гиперграф задачи** (на этом уровне часто называемый «графом» в смысле одной цельной задачи) — первый уровень, на котором система **исполняется**: один гиперграф = одна задача; по нему передаются данные, выполняется run. Комбинирование нескольких задач делается на уровне **пайплайна** (гиперграф гиперграфов).

### 5.3 Гиперграф и гиперссылки

Вся архитектура устроена как **гиперграф**: гиперрёбра могут соединять любое число узлов (не только два). **Гиперссылки** — связи, указывающие на сущность или контекст; они обеспечивают **связывание контекстов** и **взаимодействие** в масштабе фреймворка (от порта/блока до мира, этапа, артефакта или End World). Контракты уровней допускают хранение и передачу гиперссылок; сериализация и чекпоинты их сохраняют.

### 5.4 Уровень пайплайна

**Пайплайн (Pipeline)** — уровень сразу над гиперграфом задачи: это **гиперграф, узлами которого являются целые гиперграфы задач** (каждый узел — одна цельная задача: text-to-image, upscale, image-to-video и т.д.). Иными словами, пайплайн — **гиперграф гиперграфов**: на уровне задачи мы собираем узлы-задачи (Backbone, Solver, Codec, …) в один исполняемый гиперграф; на уровне пайплайна мы собираем уже **целые такие гиперграфы** как узлы и соединяем их гиперрёбрами.

- **Что течёт по пайплайну:** по гиперрёбрам пайплайна передаются **данные между задачами** — выход одного гиперграфа (например, изображение) становится входом другого (например, апскейл или image-to-video). Контракт задаётся внешними входами и выходами каждого гиперграфа-узла; пайплайн соединяет выход одного узла с входом другого (или с внешним входом/выходом пайплайна).
- **Зачем пайплайн:** один гиперграф = **одна цельная задача**; пайплайн нужен для **комбинированных сценариев** — цепочка или ветвление из нескольких задач. Примеры: текст → картинка → апскейл → видео; или аутпейнтинг → апскейл → image-to-image. Пайплайн не разбивает одну задачу на куски (текст, диффузия, декодирование — всё внутри одного гиперграфа задачи); он **соединяет готовые задачи** в сложный сценарий.
- **Вырожденный случай:** пайплайн может состоять из **одного** гиперграфа. Тогда он задаёт единый интерфейс «вход/выход пайплайна» для одной задачи — это удобно на уровне перехода (Stage), где между переходами передаётся уже state, а не сырые данные между графами.
- **Исполнение:** выполнить пайплайн — значит в порядке топологии (или заданном порядке) выполнять **целые гиперграфы** и передавать результаты по гиперрёбрам пайплайна. Каждый узел пайплайна для внешнего наблюдателя — «чёрный ящик» с входами и выходами задачи; внутреннее устройство (Backbone, Solver, Codec внутри) пайплайну не важно.

Таким образом, уровень пайплайна — это **второй исполняемый уровень** иерархии: первый — гиперграф одной задачи, второй — гиперграф таких гиперграфов. Гиперграф и гиперссылки действуют и здесь: пайплайн представлен как гиперграф (при необходимости с групповыми гиперрёбрами и гиперссылками между графами-узлами или на внешние артефакты). Выше пайплайна идёт уровень **перехода (Stage)** — гиперграф пайплайнов, реализующий одну метаморфозу state.

---

## Часть VI. Переход как метаморфоза: материя ↔ идея

### 6.1 Что такое переход (transition)

**Переход** — фундаментальное изменение состояния системы: **метаморфоза**. Один объект превращается в другой; материя — в идею, идея — в материю. Уровень перехода — уровень именно таких преобразований: не просто передача данных, а качественное превращение state (артефакты → идеализированное описание; описание → конфигурация; конфигурация → артефакты; state → обновлённый мир).

В каноне термин **«этап» (stage)** в контексте мира понимается как **переход**: каждое звено цикла мира реализуется на уровне Stage (граф пайплайнов) и осуществляет одну метаморфозу.

### 6.2 Идеальные задачи пяти переходов мира

| Переход | Идеальная задача |
|---------|------------------|
| **Философ** | Описание и идеализация материального. Вход — артефакты (блок 3); выход — идеализированное описание (блок 4). |
| **Автор** | Глубокий анализ идей Философа и описание в рамках мирового контекста. Идеальное описание (блок 4) → нарратив «что реально произошло» (блок 5). |
| **Среда** | Управление миром: (1) World update — применение state к миру при полном state; (2) Development of the world — порождение нового state (блок 1), опционально с учётом Action. |
| **Архитектор** | Интерпретация развития мира и перевод в техническую структуру. Вход — блок 1; выход — конфигурация генерации (блок 2). |
| **Творец** | Прямая реализация: по конфигурации (блок 2) генерация артефактов (блок 3). |

Цикл в идеальном представлении: новые материальные объекты (блок 3) снова попадают к Философу → идеализация (блок 4) → Автор → блок 5 → Среда (World update при полном state, затем Development → новый блок 1) → Архитектор → Творец → …

---

## Часть VII. Мир: state, пять блоков, жизненный цикл

### 7.0 Мир как непрерывное становление

**Мир (World)** в проекте — это не статичный «объект», а **непрерывная цепь крупномасштабных переходов**: гиперграф, узлами которого являются **переходы** (Философ, Автор, Среда, Архитектор, Творец), по гиперрёбрам передаётся **state**. Каждый переход — **метаморфоза** состояния (материя ↔ идея); порядок выполнения фиксирован, граф циклический. Мир **один**: он обновляется применением state (World update при полном state), а новое состояние рождается внутри цикла (Development of the world). Мир может **развиваться сам**, итеративно, без обязательного действия пользователя (Action опционален). Таким образом, мир — это **процесс**, в котором состояние непрерывно претерпевает превращения и в котором цикл замыкается через Среда: Development порождает новый state с блоком 1 → Архитектор → Творец → Философ → Автор → Среда (World update при полном state, затем снова Development) → …

### 7.1 State — пять блоков

**State** (состояние мира) задаётся **пятью блоками**:

| № | Блок |
|---|------|
| 1 | Описание того, что должно было произойти |
| 2 | Конфигурация для генерации артефактов |
| 3 | Сгенерированные артефакты |
| 4 | Описание сгенерированных артефактов |
| 5 | Описание того, что реально произошло в мире |

**World update** выполняется **только при полностью заполненном state** (все пять блоков): тогда state применяется к миру, контент мира обновляется, state сохраняется. Иначе World update не выполняется.

### 7.2 Среда — два узла

**Среда (Environment)** в графе мира — **два последовательных узла**:

1. **World update** — выполняется только если state полностью заполнен (все 5 блоков); обновляет внутреннее содержание мира, сохраняет state.
2. **Development of the world** — выполняется **безусловно**; читает мир, с учётом Action (если передан) как контекста для LLM или без него создаёт **новый state** с блоком 1. Мир может развиваться сам, итеративно.

### 7.3 Порядок и одна структура

Порядок выполнения **фиксирован**: Философ → Автор → Среда → Архитектор → Творец → … Каждый переход выполняется только при заполненных нужных ему блоках state; World update — только при блоке 5. Между Автором и Архитектором передаётся один и тот же контейнер слотов (артефакты): в материальной форме — данные, в идеальной — описания.

### 7.4 Философские аналогии уровня мира

Описание мира можно упорядочить и углубить с помощью нескольких **философских аналогий**.

- **Становление и поток (Гераклит).** «Всё течёт» — мир в проекте есть именно **течение**: state не застывает, а последовательно проходит через переходы и каждый раз качественно меняется (метаморфоза). Нет «готового» мира как объекта; есть **непрерывное становление** — цикл превращений (идея → конфигурация → артефакт → описание → нарратив → обновление мира → новая идея). Аналогия подчёркивает процессуальную природу мира: мир — это не что, а **как** — способ развёртывания состояния во времени.

- **Цикл и диалектика.** Пять переходов можно увидеть как **диалектический круг**: намерение (блок 1) → техническая форма (блок 2) → материальная реализация (блок 3) → идеальное описание (блок 4) → нарратив «что реально произошло» (блок 5) → снятие в обновлённый мир и новый блок 1. State выступает как **единый носитель** этих моментов; каждый переход «снимает» предыдущий момент и добавляет следующий. World update — момент **объективации** цикла: полный state вписывается в мир, цикл получает продолжение через Development.

- **State как «память» и «план» мира.** Пять блоков state — не просто данные, а **пять измерений** текущего состояния мира: что задумано (1), как технически задано (2), что материально создано (3), как это описано (4), как это вписано в историю мира (5). State — то, что **течёт** между переходами и **сохраняется** при World update; в нём одновременно «память» текущего цикла и «план» следующего шага (блок 1 после Development). Аналогия с душой или сознанием не обязательна, но образ «state как душа мира, проходящая через фазы» передаёт единство и преемственность.

- **Один мир и самодвижение.** Мир **один** — не множество параллельных миров, а единая цепочка переходов с единым state на каждом шаге. Он может **развиваться сам** (Development безусловно создаёт новый блок 1 по текущему состоянию мира). Это роднит модель с идеей **автопоэзиса** (Мaturana, Varela): система воспроизводит сама себя через цикл; внешний Action — лишь опциональный контекст, а не обязательный толчок. Мир как **самодвижущийся процесс** — без обязательного внешнего «часовщика» на каждом витке.

- **Переход как фаза космоса.** Каждый из пяти переходов — не произвольная «функция», а **роль** в целостном цикле: Философ (идеализация материи), Автор (нарратив в контексте мира), Среда (управление миром и порождение следующего шага), Архитектор (идея → техническая структура), Творец (структура → материя). Вместе они образуют замкнутый **космос превращений** — минимум, достаточный для того, чтобы мир мог обновляться, отражать себя в описаниях и порождать новые состояния. Аналогия с «фазами» или «стихиями» цикла подчёркивает неслучайность именно пяти звеньев и их порядка. Глубокое развитие этой темы — соответствие цикла мира **кругу Дэна Хармона** (нарративная структура как структура изменения мира) — дано в п. 7.8.

### 7.5 Начало без предзаданного state и роль пользователя

**Первая итерация** может начаться **без переданного state**: тогда Философ, Автор и World update пропускаются, цикл фактически **начинается с Development of the world**, который создаёт **первый state** (блок 1) из текущего состояния мира. Философски это — **начало без предзаданного состояния**: мир способен породить первый шаг из себя (из начального содержания или пустоты), без обязательного «внешнего толчка». **Action** (действие пользователя) **опционален**: он поступает в Development как контекст для языковой модели; при его отсутствии Development выполняется безусловно и создаёт следующий эпизод по текущему миру. Пользователь тем самым выступает не как необходимая причина каждого шага, а как **опциональный со-автор**: мир может развиваться сам; участие пользователя обогащает контекст, но не является условием возможности цикла. Передача state пользователем на первом шаге задаёт, какие переходы выполняются или пропускаются (в зависимости от заполненности блоков) — то есть **внешний ввод** встраивается в ту же логику «выполнять переход только при готовности входа», без отдельной онтологии «запуск извне».

### 7.6 Слияние миров: несколько доступных способов

**Миры могут быть смержены** — два или более мира способны образовать один мир или обновить один из миров за счёт других. Фреймворк **поддерживает слияние миров несколькими доступными способами**; конкретный перечень способов и их семантика задаются каноном, а не жёстко зашиты в единственный вариант. Возможные измерения слияния включают, например: объединение **контента** миров (персонажи, лор, артефакты), слияние или согласование **state** (пять блоков), объединение **структуры** (переходы, пайплайны при совместимости контрактов), слияние с выбором **стратегии разрешения конфликтов** (приоритет одного мира, объединение по правилу, явный выбор пользователя). Ни один из способов не является единственно «правильным»: пользователь или сценарий выбирает подходящий способ слияния в зависимости от задачи (объединить две ветки истории, влить мир-источник в мир-приёмник, синтезировать новый мир из группы). Тем самым **слияние миров** закрепляется как **поддерживаемая возможность** с **несколькими доступными способами**; онтология мира (state, контент, цикл переходов) не меняется — меняется только операция сборки одного мира из нескольких по выбранному правилу. Реализация конкретных стратегий слияния входит в контракт и реестр без изменений движка.

### 7.7 Форк и производные миры

**Миры и вселенные могут быть форкнуты** — скопированы с последующим **независимым развитием**. Фреймворк **поддерживает форк** как поддерживаемую возможность: на основе одного мира или вселенной создаётся производный артефакт (копия конфига, чекпоинта, контента и при необходимости state), который далее эволюционирует отдельно от источника. Тем самым одна и та же основа (один «песок») даёт **ветвление историй и конфигураций**: разные авторы или сценарии развивают производные миры или вселенные без изменения исходников; принцип Lego и «песок в пустыне» распространяются на **производные артефакты**. Конкретная семантика форка (глубина копирования, ссылки на общие чекпоинты, версионирование) задаётся каноном; философский принцип — **возможность ветвления и независимого развития** миров и вселенных без дублирования онтологии.

### 7.8 Цикл мира и круг Хармона: философия связи

Ниже излагается **философская позиция** проекта относительно связи цикла мира Yggdrasil с **кругом Дэна Хармона** (Story Circle) — нарративной структурой из восьми шагов (упрощённый «Путь героя» Кэмпбелла): *почему* соответствие считается не случайным, *что* оно означает для онтологии мира и *как* одна и та же структура охватывает и нарратив, и систему.

#### 7.8.0 Зачем вообще связывать круг Хармона и цикл мира

Круг Хармона — инструмент **сценарного мастерства**: он описывает, как устроена **хорошая история** (эпизод, дуга, фильм). Цикл мира Yggdrasil — **операционная схема**: как устроено **обновление мира** (переходы, state, применение к миру). Связывать их имеет смысл только если мы признаём, что **обновление мира в системе и есть рассказывание истории о мире**: мир не «просто обновляется по правилам», а проходит фазы, которые суть те же, что и фазы любой истории — зона комфорта, желание, выход за границу, поиск, обретение, цена, возврат, изменение. Позиция проекта: **цикл мира не просто «напоминает» круг Хармона, а реализует его на уровне мира как субъекта**. Мир в Yggdrasil ведёт себя как «герой» своей собственной истории: у него есть статус-кво (You), есть желание изменения (Need), он переходит в реализацию (Go, Search), обретает результат (Find), платит цену в виде последствий (Take), возвращает результат в себя (Return) и меняется (Change), становясь новым статус-кво (новый You). Поэтому соответствие — не метафора, а **единая структура**: одна и та же восьмифазная логика задаёт и нарративную дугу, и машинный цикл мира.

#### 7.8.1 Мир как субъект цикла: не персонаж, а целое

В классическом круге Хармона субъект — **герой** (персонаж). В цикле мира субъект — **мир целиком**: его состояние (история, глоссарий, персонажи, артефакты). Мы не отождествляем мир с одним персонажем; мы отождествляем **траекторию изменения мира** с **траекторией героя в круге Хармона**. То, что для героя — «я в зоне комфорта», для мира — «мир в текущем состоянии»; то, что для героя — «я хочу чего-то», для мира — «что должно произойти» (блок 1); то, что для героя — «я возвращаюсь и изменился», для мира — «мир обновлён и стал новым статус-кво». Таким образом, **мир выступает как единый субъект своей метаморфозы**: он не «содержит» историю о герое, а **сам проходит** фазы героя. Это согласуется с изложенной выше философией мира (п. 1.7, 7.0): мир — непрерывная цепь крупномасштабных переходов, в каждой из которых состояние претерпевает метаморфозу. Метаморфоза мира и есть «путь героя», применённый к целому миру.

#### 7.8.2 Универсальность структуры: желание → действие → цена → возврат → изменение

Круг Хармона восходит к «Пути героя» Кэмпбелла и к более общим представлениям о том, как устроено **изменение через действие**: из устойчивого положения (You) возникает потребность (Need); субъект переходит в новую ситуацию (Go), ищет и находит (Search, Find), платит цену (Take), возвращается (Return) и оказывается изменённым (Change). Это не только «схема сценария», а **форма любого осмысленного изменения**: что-то было стабильным → появилось желание изменить → был выход в действие → было обретение и цена → было возвращение и превращение. Цикл мира Yggdrasil устроен ровно так: мир стабилен (You) → формулируется, что должно произойти (Need) → идея переходит в план и в артефакты (Go, Search) → артефакты осмысляются и превращаются в нарратив последствий (Find, Take) → результат применяется к миру (Return) → мир меняется (Change). Поэтому соответствие — не «красивая параллель», а **одна и та же абстрактная структура**: круг Хармона описывает её в языке нарратива, цикл мира — в языке переходов и state. Позиция проекта: **всякое циклическое развитие мира в системе подчиняется этой структуре**, и наоборот — всякая история, укладывающаяся в круг Хармона, может быть прочитана как один виток цикла мира (мир = контекст истории; изменение контекста = Change).

#### 7.8.3 Статус-кво и зона комфорта: You как онтологическая опора

«You» в круге Хармона — не просто «начало эпизода», а **онтологическая опора**: то, от чего всё отталкивается и к чему (в преобразованном виде) всё возвращается. Зона комфорта — место, где субъект **узнаёт себя** и где мир **уже описан** (история, глоссарий, персонажи). В цикле мира **You = текущее состояние мира** именно в этом смысле: мир как он есть до намерения — неизменённая структура, «комфортная» в том смысле, что она стабильна и не требует пока действия. Важно: You — это **не** блок 1 и не «мир после обновления». You — это **сам мир в его актуальном виде** на старте витка. Блок 1 (Need) появляется *поверх* этого мира как формулировка того, что должно измениться. Так мы избегаем путаницы «зона комфорта = намерение»: зона комфорта — то, что есть; намерение — то, чего не хватает. Философски это закрепляет **приоритет бытия над желанием**: сначала мир есть (You), потом мир желает изменения (Need). Цикл замыкается тем, что после Change обновлённый мир снова становится «тем, что есть» — новым You. Таким образом, You и Change — два полюса одного витка: начальный и конечный статус мира; круг Хармона и цикл мира совпадают в том, что оба опираются на понятие **статус-кво** как на начало и конец изменения.

#### 7.8.4 Идея и материя: Go и Search как переход от идеального к материальному

В философии проекта заложено разделение **материального** и **идеального** и их синтез (Часть II, III). В цикле мира это проявляется так: **Need** и **Go** — фазы идеи (что должно произойти, в какой конфигурации); **Search** — фаза материализации (генерация артефактов). Круг Хармона описывает «вход в непривычную ситуацию» (Go) и «поиск» (Search): герой переходит границу и адаптируется к новому. В цикле мира **Go = Архитектор**: чистая идея (блок 1) превращается в план воплощения (блок 2) — ещё не материя, но уже не абстрактное желание. **Search = Творец**: план воплощается в артефакты (блок 3) — появление материального результата. Таким образом, связь с кругом Хармона подчёркивает, что цикл мира **явно проводит границу между идеей и материей**: от «что должно произойти» к «что создано». Это согласуется с гегелевской логикой начала (Введение) и с правилом «блок → узел» (п. 3.3): идеальное (узел, форма) и материальное (блок, содержание) в цикле мира не смешиваются, а следуют друг за другом в определённом порядке (сначала конфигурация, потом артефакты).

#### 7.8.5 Осмысление и цена: Find и Take как переход от материи к смыслу

После появления артефактов (блок 3) цикл мира переводит их в **описание** (Философ → блок 4) и затем в **нарратив последствий** (Автор → блок 5). В круге Хармона **Find** — обретение (часто «ложная победа»); **Take** — плата, последствия. В цикле мира Find = не «получение артефактов», а **описание артефактов** (Философ): обретение в осмысленном виде. Take = **что реально произошло в мире** (Автор): последствия, цена, необратимое изменение. Философская позиция: **материя (артефакты) не остаётся «сырой»** — она должна быть проинтерпретирована (Find) и вписана в историю мира (Take). Так цикл мира реализует обратный переход от материального к идеальному: артефакты становятся текстом и смыслом, а смысл — основой для применения к миру (Return). Круг Хармона фиксирует, что «обретение» и «плата» — две стороны одного движения: мир получает новое содержание и одновременно фиксирует, чем он «заплатил» (что изменилось). Это совпадает с ролью Философа и Автора: первый даёт идеализацию, второй — нарратив последствий, то есть **осмысленную цену** изменения.

#### 7.8.6 Возврат и превращение: Return и Change как замыкание цикла

Return и Change в круге Хармона — **возвращение в мир** и **превращение** (новый статус-кво). В цикле мира Return = **применение state к миру** (World update), Change = **преобразование структуры мира** (история, глоссарий, персонажи) и образование нового статус-кво. Позиция проекта: **применение state к миру и есть одновременно возврат и изменение**. Мы не разделяем «сначала вернулись, потом изменились» как два независимых шага во времени: возврат результата в мир *и есть* изменение мира. Новый статус-кво — не «следующий шаг после Return», а **результат** Return: мир изменился, значит, он уже в новом состоянии, и это новое состояние есть новый You. Так круг замыкается: Change порождает нового You, и следующий виток начинается с этого нового You. Философски это означает, что **цикл мира не имеет «внешнего» конца**: конец одного витка — начало другого; мир всегда в некотором статус-кво, и каждое обновление переводит его в следующий статус-кво. Круг Хармона и цикл мира совпадают в том, что оба задают **бесконечно повторяемую единицу** (эпизод / виток), в которой субъект выходит из себя и возвращается к себе уже другим.

#### 7.8.7 Один виток — одна нарративная единица

Практический вывод из соответствия: **один полный виток цикла мира = одна законченная нарративная единица** (эпизод, дуга, «история одного изменения»). Это даёт критерий полноты: если мир прошёл все восемь фаз (You → … → Change), у нас есть одна цельная история изменения. Если виток обрывается на середине (например, до Return), история незавершена — мир «не вернулся» и «не изменился». Таким образом, круг Хармона не только объясняет, как устроен цикл мира, но и **нормирует** его: полнота витка совпадает с полнотой нарративной дуги. Для проектирования сценариев, обучения и документирования это означает: можно явно опираться на восемь фаз при проверке сценариев и при генерации контента (блок 1 как Need, блок 5 как Take и т.д.), сохраняя единый язык для «истории» и «системы» (ср. п. 1.12 — единый язык для всех уровней).

#### 7.8.8 Итог философской позиции

**Позиция проекта:** цикл мира Yggdrasil и круг Дэна Хармона описывают **одну и ту же структуру изменения**: статус-кво → желание → выход в реализацию → обретение → цена → возврат → превращение в новый статус-кво. Мир в Yggdrasil выступает как **субъект** этой структуры; переходы и блоки state суть **реализация** восьми шагов Хармона на уровне мира. Соответствие не метафорическое, а **структурное**: одна абстрактная форма задаёт и нарратив (история героя), и систему (метаморфоза мира). Связь закрепляет единый язык для сценариев и для движка, опору на статус-кво (You) как начало и конец витка, явное разделение идеи и материи (Go/Search) и материи и смысла (Find/Take), а также понимание Return и Change как одного момента — применения результата к миру и превращения мира в новый You. Детализация соответствия по каждому шагу (прямые аналогии You, Need, Go, Search, Find, Take, Return, Change с фазами цикла мира) задаётся в каноне (документ HARMON_CIRCLE_AND_WORLD_CYCLE.md в docs).

---

## Часть VIII. Вселенная: гиперграф миров и этап для сообщества

### 8.1 Этап Вселенной: что это за уровень

**Вселенная (Universe)** — **высший уровень проекта**. Выше вселенной в иерархии Yggdrasil уровня нет: она представляема **гиперграфом миров** и обладает своим **единым «эфиром вселенной»** — общей средой, в которой миры существуют и взаимодействуют (общий контекст, поток трансляции, обмен по гиперрёбрам). **Этап Вселенной (уровень Вселенная)** — уровень **выше мира**. Один мир — одна цепочка переходов (один цикл, один state); вселенная — **гиперграф, узлами которого являются миры** (world_id → World). По гиперрёбрам между мирами передаётся обмен: state snapshot, артефакты, контекст, события, **сущности** с состоянием (персонажи, агенты). Вселенная есть одновременно **гиперграф миров** (структура связей) и **счёт миров** (множество узлов). Выполнение — обход гиперграфа миров (топологический порядок или фиксированный цикл); после run(world_A) выходы мира A по payload_spec мапятся на входы мира B по входящим гиперрёбрам. Канон одного мира не меняется: вселенная не подменяет мир, а добавляет уровень «над» ним — множество миров и связи между ними.

### 8.2 Структура и выполнение вселенной

- **Узлы:** миры (объектные — развиваются, state обновляется; или End Worlds — фиксированы, только чтение). Каждый мир — самостоятельная единица со своим циклом и своим state.
- **Гиперрёбра:** что передаётся между мирами (payload_spec): направление влияния (A → B, B → A, двунаправленное), момент синхронизации (после run(world_A), после run(world_B), после обхода подграфа). Гиперрёбра могут связывать более двух миров (групповые связи). Гиперссылки — связывание контекстов и ссылки на End Worlds.
- **Единый «эфир вселенной»:** общая среда вселенной — общий контекст (аналог «колодца Урд» в мифе Иггдрасиль), единый поток трансляции взаимодействий и при необходимости общее хранилище или каталог (глоссарий, правила, стиль), доступное всем мирам по гиперрёбрам или при инициализации. Миры погружены в этот эфир и обмениваются данными и сущностями через него.
- **Выполнение:** run(universe, ...) — обход гиперграфа миров, вызов run(world, ...) для каждого мира, передача данных по гиперрёбрам; при переходе сущностей — обновление state мира-источника и мира-назначения по правилам кросс-мирового влияния.

### 8.3 Этап Вселенной создан прежде всего для сообщества

Уровень Вселенной предназначен **в первую очередь для сообщества пользователей**:

- **Сравнение миров:** пользователи могут **сравнивать свои миры** друг с другом.
- **Развитие через взаимодействие:** развитие миров на основе **взаимодействия персонажей пользователей с мирами других пользователей** — персонаж из мира A переходит в мир B, действует там, влияет на историю B и на свою историю в A.
- **Единая система взаимодействий:** построение **единой системы мировых взаимодействий**, сложных интеграций между мирами (направление влияния, синхронизация, payload_spec).
- **Обмен и совместное творчество:** **делиться результатами с сообществом**, обмениваться идеями, **расширять свои миры** за счёт взаимодействия с мирами других пользователей.
- **Группы миров:** формирование **групп миров** по общим идеям или сюжету.
- **Влияние на экосистему:** возможность **творчески влиять на всю экосистему** и в определённом смысле **деструктивно влиять** на неё — например, **синтезировать новые миры** из взаимодействия группы миров или **аннигилировать миры** в результате тех или иных взаимодействий.
- **Слияние миров:** миры могут быть **смержены** в один мир **несколькими доступными способами** (см. п. 7.6); на уровне вселенной слияние применяется к мирам-узлам гиперграфа — объединение контента и состояния нескольких миров, выбор стратегии слияния (приоритет, объединение, разрешение конфликтов) остаётся в рамках контракта и канона.

На уровне Вселенной как объединения миров должен существовать **единый поток трансляции (single fluid broadcast)** всех взаимодействий, затрагивающих экосистему. Для этапа Вселенной важны **децентрализация** и **полная распределённость** при сохранении всех возможностей нижележащих уровней и **удобстве для сообщества**.

### 8.3.1 Сообщество и совместное творчество как заложенная ценность

Совместное творчество, обмен мирами и взаимодействие пользователей — не побочный эффект архитектуры, а **заложенная ценность** проектирования. Уровень Вселенной существует не только «технически» (гиперграф миров, payload_spec), но и **ценностно**: чтобы пользователи могли сравнивать миры, переносить персонажей между мирами, делиться результатами, формировать группы миров и влиять на экосистему в целом. Архитектура сознательно выводит **сообщество** в первый план: единый поток трансляции, децентрализация, распределённость и удобство для сообщества — не опции, а отражение того, что система мыслится как среда **коллективного создания и обмена**. Тем самым «вселенная» — не просто следующий уровень абстракции над миром, а место, где множество авторов и миров оказываются в **едином поле взаимодействия**; проектирование уровня Вселенной с самого начала ориентировано на эту ценность.

### 8.4 Взаимодействие между мирами и между сущностями

- **Между мирами:** по гиперрёбрам задаются условия и порядок взаимодействия, направление влияния, момент синхронизации; контракт вселенной описывает, когда мир B получает входы от мира A и как обновляется state мира A (например, при возврате сущности или отражении событий из B).
- **Между сущностями:** сущности могут быть помечены происхождением (origin_world_id); правила мира по-разному обрабатывают «локальных» и «пришлых» сущностей. **Переход сущности по ребру** (из мира A в мир B) и обратное отражение событий в мир A — основа кросс-мирового влияния. **Агентные системы** на уровне вселенной обеспечивают обмен данными между мирами: агенты/персонажи перемещаются между мирами, их действия в мире B влияют на историю B и на свою историю в мире A.

### 8.5 End Worlds (миры-завершения): поддерживаемая возможность

**End World** — мир, который **не изменяется** и **фиксирован**; к нему можно привязываться и с ним взаимодействовать (читать контекст). Объектный мир (Near World), связываясь с End World по **гиперссылке**, обогащает свой контекст и истории персонажей; **End World не меняется**. Пример: книга как End World. В гиперграфе миров вершины могут быть типа «объектный мир» или «End World»; гиперссылки из мира/персонажа на End World разрешаются при выполнении (чтение контекста). В сериализации мира выделяются два крупных поля: (1) структура/исполняемая часть, (2) контент мира; End World = только контент, без исполняемой части (без весов и запуска).

Фреймворк **должен поддерживать** End Worlds как **фиксированные точки** в пространстве миров — якоря, к которым можно обращаться по гиперссылке, которыми можно обмениваться и на которые можно опереться в кросс-мировом сценарии. Использование End Worlds **не обязательно**: вселенная может состоять только из объектных миров; поддержка End Worlds — **возможность**, а не предписание. Тем самым «мир как неподвижная точка» — поддерживаемая, но не обязательная опция для уровня Вселенной.

### 8.6 Вселенная и миф Иггдрасиль

Уровень Вселенной напрямую сопоставляется с **мифом Иггдрасиль** — мировым древом, соединяющим несколько миров (реальмов). **Гиперграф миров** — структура: узлы = миры (девять реальмов в мифе — счёт миров в модели), гиперрёбра = корни и ветви, соединяющие миры. **Колодец Урд** (источник у корня, норны, судьба) — воплощение **единого эфира вселенной**: общий контекст или хранилище, доступное мирам; среда, в которой миры пребывают и через которую обмениваются. **Обмен по гиперрёбрам** — как Белка Рататоск, снующая между орлом на вершине и змеем у корней и переносящая сообщения. Один мир в каноне — один «реальм» на древе (Мидгард, Асгард и т.д.); **вселенная** — целое древо: гиперграф таких миров и связей между ними. Имя Yggdrasil закрепляет не только техническую иерархию, но и то, что этап Вселенной — это уровень, на котором множество миров оказываются **единым целым** по связям и обмену.

---

## Часть IX. Агентные системы и гибкость использования

### 9.1 Агенты как пользователи той же онтологии

Агенты и инструменты — **не отдельная онтология**, а те же блоки, узлы и графы, собранные в цикл «действие → наблюдение → ответ». Агент — блок с состоянием и портами для tool_calls / tool_results; инструменты — блоки или целые графы, вызываемые агентом. Никаких «агентных примитивов» поверх системы: агентный сценарий есть **один из способов сборки** в рамках того же контракта и той же иерархии уровней. Тем самым полная свобода и полная кастомизируемость распространяются и на агентов: любой агент, любые инструменты, любой цикл реализуются через те же блоки и те же правила, без изменений движка.

### 9.2 Полная интеграция агентных систем

Агентные системы — **равноправная часть архитектуры**, не надстройка. Агент — блок с состоянием между вызовами, с возможностью возвращать **tool_calls** и принимать **tool_results**; инструменты — блоки или графы, вызываемые агентом. Граф может содержать узел-агента и узлы-инструменты; выполнение — цикл «агент → tool_calls → выполнение инструментов → агент» (agent_loop). Этап и мир могут содержать этапы-агентов с инструментами; на уровне вселенной агенты/персонажи могут перемещаться между мирами и влиять на историю нескольких миров.

### 9.3 Полная гибкость использования

Движок должен позволять использовать **каждую часть в классических сценариях** при соблюдении канона:

- Только агентные системы (агент + инструменты, без обязательного мира или диффузии).
- Только модель мира (цикл этапов, state, Scheme, без обязательных агентов или диффузии).
- Только языковые модели (инференс/обучение на уровне графа/блоков).
- Только диффузионные модели; только простые нейросети (уровень блоков).
- Любые комбинации: язык + диффузия, агенты + мир, полный стек.

Пользователь может подниматься или опускаться до нужного уровня представления и использовать движок именно на этом уровне при **единой основе** и **строгом соблюдении канона и философии**.

### 9.4 Полная поддержка парадигм на базе движка Yggdrasil

Проект заявляет **полную поддержку** ряда широко распространённых парадигм и технологий — при этом **полностью аналогичный функционал** реализуется **на базе движка Yggdrasil**: те же блоки, узлы, гиперграфы, контракт и реестр; никакой отдельной онтологии или «второго движка». Ниже перечисленные направления встраиваются как **способы сборки и специализации** в рамках единой основы; пользователь получает тот же объём возможностей, что и в специализированных экосистемах, но в единой системе.

**Агентные системы (в духе n8n).** **Полная поддержка** агентных систем и workflow-автоматизации, вдохновлённая подходом **n8n**: узлы как шаги пайплайна, визуальная или декларативная сборка цепочек, триггеры, условия, циклы, интеграции с внешними сервисами. В Yggdrasil агент и каждый инструмент — блоки в гиперграфе; граф задачи или пайплайн задаёт порядок и связи; ветвление, условия и циклы реализуются через те же узлы и порты. **Полностью аналогичный функционал** (оркестрация агентов, вызов инструментов, передача данных между шагами, обработка событий) достигается на базе движка Yggdrasil — без отдельного «агентного слоя» и без потери возможностей.

**Графовые воркфлоу LangChain / LangGraph.** **Полная поддержка** парадигмы графовых воркфлоу в духе **LangChain** и **LangGraph**: цепочки (chains), графы состояний (stateful graphs), условные переходы, циклы агента, человеческий-in-the-loop. В Yggdrasil гиперграф задачи и пайплайн — нативная структура; узлы — вызовы LLM, инструментов, преобразований; state передаётся по гиперрёбрам; условные переходы и циклы задаются топологией и блоками-условиями. **Полностью аналогичный функционал** (chaining, state graph, agent loop, tool use, memory) реализуем на базе движка Yggdrasil — те же абстракции выражаются через блок, узел, порты и run.

**Neural Radiance Fields (NeRF).** **Полная поддержка** Neural Radiance Fields и родственных подходов (volume rendering, 3D-реконструкция, новая генерация видов). NeRF-модель и этапы пайплайна (эмбеддинг, растеризация, рендер) встраиваются как **блоки** с портами (вход: позиции/направления; выход: цвет, плотность); обучение и инференс — по тому же контракту; пайплайн из нескольких блоков собирает полный NeRF-сценарий. **Полностью аналогичный функционал** (обучение сцен, рендеринг, интеграция с диффузией или миром) доступен на базе движка Yggdrasil — без введения отдельной онтологии для 3D/NeRF.

**Graph Neural Networks (GNN).** **Полная поддержка** Graph Neural Networks: сообщение по рёбрам графа, агрегация в узлах, многослойные GNN, графы как вход и как внутреннее представление. В Yggdrasil граф и гиперграф — базовая форма; блок может реализовать слой GNN (message passing, aggregation); граф задачи может кодировать структуру графа данных; входы и выходы согласуются через порты. **Полностью аналогичный функционал** (GCN, GAT, message passing, графовая классификация/регрессия, связь с миром или RAG) реализуем на базе движка Yggdrasil — GNN суть один из типов блоков в реестре.

**RAG (Retrieval-Augmented Generation).** **Полная поддержка** RAG: поиск по корпусу (эмбеддинги, векторный/гибридный поиск), подстановка контекста в промпт, вызов LLM с релевантными фрагментами, при необходимости переранжирование и многократный retrieve. В Yggdrasil блоки эмбеддинга, индекса и поиска — узлы с портами; граф или пайплайн соединяет retrieve → форматирование контекста → LLM; корпус и индекс могут храниться в блоке или во внешнем хранилище (в т.ч. БД) без изменения контракта. **Полностью аналогичный функционал** (индексация, поиск, augmentation, генерация с контекстом) достигается на базе движка Yggdrasil — RAG есть частный случай сборки графа из блоков.

**Итог.** Во всех перечисленных случаях проект обеспечивает **полную поддержку** и **полностью аналогичный функционал** на базе одного движка: агентные системы (n8n), графовые воркфлоу (LangChain/LangGraph), NeRF, GNN и RAG реализуются как комбинации блоков, узлов и гиперграфов по единому контракту, без дублирования онтологии и без потери возможностей специализированных решений.

---

## Часть X. Сериализация, обучаемость, расширяемость

### 10.1 Сериализация на всех уровнях

Проект **полностью сериализуем на каждом уровне** — от блока до мира (и при расширении — вселенной). Для каждого уровня: конфиг структуры + чекпоинт весов; возможность **загрузки из чекпоинта** этого уровня. Мир как верхняя абстракция представляется конфигурационным файлом или шаблоном; из конфига — загрузка, из шаблона + параметров — генерация мира, конфиг + чекпоинт — обученный мир. Два крупных поля сериализации мира: (1) структура/исполняемая часть, (2) контент мира; End World — только контент. **Взаимодействуемость:** конфиг и чекпоинт — формат обмена; реализации, соблюдающие один контракт, могут **взаимодействовать**: одни и те же артефакты загружаются и выполняются в другой среде (другая установка, другой язык бэкенда при том же контракте портов и run).

### 10.2 Обучаемость на всех уровнях

На **каждом уровне представления** всё, что может быть обучено, должно поддерживать обучение. Любой блок с обучаемыми параметрами (Backbone, LoRA, Codec, Conditioner и т.д.) — обучаем в составе своего уровня; граф, пайплайн, этап, мир — с выбором trainable сущностей и заморозкой остальных. Конфиг обучения и чекпоинты сериализуемы; после обучения сохранённую сущность можно загрузить и продолжить обучение или только инференс.

### 10.3 Единый контракт и расширяемость

На каждом уровне — единый контракт: объявление входов/выходов (get_input_spec, get_output_spec), выполнение (run), сериализация (конфиг + чекпоинт). Новые сущности и возможности вводятся **без изменений движка**: только реализация контракта и регистрация в реестре; никаких структурных инъекций в ядро, никаких манипуляций с фреймворком — фреймворк изначально предоставляет все возможности. При противоречии новой идеи с Scheme или Philosophy сначала обновляется канон, а не ядро под частный случай. Поддержка гиперссылок в контрактах; поддержка блоков через API — любой блок, для которого доступен API, должен подключаться через API **без отличия** от режима с локальными весами или весами на эндпоинте (единый контракт, одни сценарии).

### 10.4 Повторное использование одной модели: тождество без дублирования

Если один и тот же чекпоинт (одна и та же модель, один checkpoint_ref) используется в нескольких узлах, графах или пайплайнах, в памяти должен существовать **один экземпляр** — все места ссылаются на него. Философски это — **тождество без дублирования материи**: одна и та же «сущность» (модель, заданная ref) не умножается в бытии при множественном использовании; система признаёт идентичность по идентификатору и экономит материю (память). Правило действует на всех уровнях иерархии и для всех типов блоков (в т.ч. LLM, VLM, backbone, codec через API с одним model_id). Тем самым **идентичность блока** задаётся не только block_id в графе, но и ref на общий ресурс: «один ref → один экземпляр» есть онтологический принцип — не создавать копии того, что уже есть под тем же именем.

**Идентичность и различие.** Система опирается на оба момента: **идентичность** (один ref → один экземпляр; один block_type как понятие в реестре) и **различие** (много экземпляров с разными block_id, много конфигов, много миров и вселенных). Общее понятие задаёт «что это»; конкретные воплощения — «кто именно» и «в каком состоянии». Онтология не сводится ни к чистому тождеству (тогда не было бы множества сущностей), ни к чистому различию (тогда не было бы единого контракта и реестра): идентичность и различие работают вместе на каждом уровне.

### 10.5 Лёгкие кастомные миры и масштабируемость без привязки к одной архитектуре

**Лёгкие кастомные миры:** базовый мир (все веса заморожены) + LoRA-адаптеры (или аналоги), подключённые ко всем нужным блокам; обучаются только адаптеры. Получается **кастомный мир** без полного fine-tune: один базовый мир и много **вариантов** за счёт разных наборов адаптеров. Философски это — **мир как шаблон и вариация**: одна материя (базовый мир), много форм (наборы LoRA); адаптация без дублирования всей материи. Та же логика «тождество / вариация» на уровне мира.

**Масштабируемость и расширяемость:** проект не привязан к одному типу модели или архитектуре. LLM, VLM, любая диффузионная модель, любая нейросетевая архитектура встраиваются как блоки с объявленными портами и выполнением; **фундамент предписывает только форму** (контракт, порты, run), а не содержание (какие слои, какая архитектура). Новый тип блока добавляется через реализацию контракта и регистрацию в реестре — без изменения ядра. Тем самым система **открыта по содержанию**: любое конкретное воплощение, удовлетворяющее форме, принадлежит той же онтологии. Масштабируемость обеспечивается единым фундаментом, сериализуемостью на всех уровнях и отсутствием жёсткой привязки к конкретному семейству моделей.

### 10.6 Воспроизводимость

Как прямое следствие сериализации: **конфиг + чекпоинт = то же поведение**. Любой сценарий — от одного блока до мира или вселенной — можно сохранить и затем воспроизвести в той же или другой среде: загрузка по конфигу и чекпоинту восстанавливает структуру и веса, исполнение даёт воспроизводимый результат при тех же входах. Философски это — **возможность повторить** любой момент системы, переносить миры и модели между средами; «время» системы можно в определённом смысле откатывать и воспроизводить. Воспроизводимость не добавлена отдельно — она вытекает из всеобъемлющей сериализации и единого контракта.

### 10.7 Нет скрытого состояния

Всё, что влияет на поведение системы, должно находиться в **конфиге**, **чекпоинте** или во **входных данных**, явно подаваемых на порты. Нет «скрытого состояния» фреймворка: никакой внутренней переменной, таймера или кэша, которые бы не были частью сериализуемого состояния блока, графа или мира и которые пользователь не мог бы в принципе переопределить или обойти через контракт. Это усиливает воспроизводимость (конфиг + чекпоинт + входы полностью задают результат) и принцип «чего система не делает»: нет магии, которую нельзя было бы увидеть или заменить. Если блок или переход нуждаются в дополнительном состоянии — оно входит в контракт (порты, сериализация); движок не добавляет своего невидимого слоя. Тем самым **прозрачность** и **предсказуемость** заложены в онтологию: поведение выводимо из явно заданного.

**Наблюдаемость.** Поскольку состояние и структура сериализуемы, они **наблюдаемы**: конфиг и чекпоинт можно просмотреть, порты и связи — прочитать из спецификации. На любом уровне пользователь или инструмент может «заглянуть внутрь» без обхода чёрного ящика: что в узле, какие связи, какое состояние после run. Наблюдаемость — прямое следствие отсутствия скрытого состояния и единого контракта; она не добавлена отдельно, а вытекает из онтологии.

### 10.8 Детерминированность и порядок исполнения

Порядок выполнения — **часть идеи** системы, а не случайность. Обход гиперграфа (топологический порядок, явный порядок узлов или рёбер), последовательность переходов в мире (Философ → Автор → Среда → Архитектор → Творец), порядок обхода миров во вселенной заданы **структурой** (конфигом) и правилами движка. При одних и тех же конфиге, чекпоинте и входах порядок исполнения **однозначен**; воспроизводимость включает и воспроизводимость порядка. Философски это — **детерминированность в широком смысле**: система не полагается на «как получится»; поток данных и state идёт по предписанным путям. Там, где нужна стохастичность (например, сэмплирование в модели), она явно введена в блок (входы, параметры) и сериализуема; сама структура обхода остаётся определённой. Тем самым предсказуемость и контроль пользователя над сценарием поддерживаются на уровне архитектуры.

### 10.9 Ошибки и частичное выполнение

Философия **не предписывает** единую политику обработки ошибок: как реагировать на сбой блока, таймаут, неполные данные или частичный результат — остаётся в рамках контракта блоков и переходов. Блок может объявить порты для статуса или fallback; переход может зависеть от условий готовности входа. Движок не добавляет «магии» поверх этого: нет единого обязательного retry, единого формата ошибки или единого способа отката — всё реализуемо **внутри** блоков и графов при соблюдении портов и сериализации. Тем самым место для **устойчивости** (повторы, частичное выполнение, деградация) есть, но оно не зашито в ядро: пользователь и разработчик выбирают стратегию в своих блоках и сценариях, не ломая единства контракта.

### 10.10 Поддержка и возможность использования баз данных

Система **поддерживает и допускает использование баз данных** как законный способ хранения и доступа к сериализованным артефактам, конфигурациям, чекпоинтам, контенту миров и состоянию. База данных не вводит новую онтологию: она выступает **реализацией хранилища** для того, что уже определено контрактом — конфиг, чекпоинт, state, содержание мира, каталог вселенной (в т.ч. аналог «колодца Урд»). Семантика загрузки и сохранения остаётся той же: **конфиг + чекпоинт = то же поведение**; различается только то, откуда конфиг и чекпоинт читаются (файл, API, база данных) и куда записываются. Для движка и для остальных уровней иерархии источник и приёмник данных **не меняют контракта**: блок, граф, мир загружаются по тем же правилам, независимо от того, лежат ли артефакты в файловой системе, в объектном хранилище или в базе данных.

**Принципы.** (1) **Поддержка** — архитектура и канон не запрещают и не обходят использование БД; там, где нужны персистентность, поиск, версионирование или масштабное хранение контента и состояний, база данных — допустимая и поддерживаемая опция. (2) **Единый контракт** — доступ к данным через БД реализуется в рамках тех же интерфейсов (загрузка по ref, сохранение конфига и чекпоинта, запрос контента мира); снаружи блока или графа не видно, хранится ли артефакт в БД или в файле. (3) **Отсутствие привязки к вендору** — никакой единственной СУБД или формата хранения философия не предписывает; любой бэкенд, способный сохранять и отдавать сериализованные сущности по контракту, допустим. (4) **Опциональность** — использование баз данных не обязательно: минимальный сценарий (файлы, чекпоинты на диске) остаётся полноправным; БД добавляется там, где этого требуют масштаб, совместный доступ, каталогизация или воспроизводимость в распределённой среде.

Тем самым **базы данных вписываются в границу системы** так же, как внешние API и вики-ресурсы: они — допустимый способ реализации хранения и доступа; онтология (блок, узел, сериализация, контракт) не меняется, меняется только способ персистенции и при необходимости способ запроса. Поддержка и возможность использования баз данных закрепляются как принцип: система открыта для хранения в БД без изменения движка и без нарушения единства контракта.

### 10.11 Версионирование и эволюция артефактов

На каждом уровне артефакты (конфиг, чекпоинт, мир, вселенная) **могут иметь версию и историю**. Воспроизводимость включает возможность **воспроизвести любую версию** по идентификатору; откат к предыдущему состоянию, сравнение версий и ветвление (в т.ч. форк миров, п. 7.7) опираются на сериализуемость и единый контракт. Философия не предписывает единственный формат версионирования (теги, хэши, временные метки, каталог в БД): **поддержка версий** закреплена как принцип — система допускает эволюцию артефактов во времени с возможностью идентификации и загрузки конкретной версии. Тем самым «сохранить, обучить, масштабировать» дополняется **«версионировать и воспроизвести любую точку эволюции»** без введения отдельной онтологии.

### 10.12 Тестируемость и отладка

Поскольку поведение системы выводимо из **конфига**, **чекпоинта** и **входов на порты**, любой уровень (блок, граф, пайплайн, мир) **тестируем и отлаживаем** без скрытой магии. Моки и заглушки реализуются как блоки с тем же контрактом портов; воспроизводимый прогон по сохранённому конфигу и фиксированным входам даёт детерминированный результат — основу для автоматических тестов. Отладка сводится к наблюдению за состоянием и потоками (наблюдаемость, п. 10.7) и к варьированию конфига и входов. **Тестируемость и отладка** — не отдельная подсистема, а **прямое следствие** контракта, отсутствия скрытого состояния и воспроизводимости; философия закрепляет их как принцип: система на всех уровнях допускает проверку и отладку в рамках той же онтологии.

### 10.13 Локальное и распределённое выполнение

**Один и тот же контракт и конфиг** могут исполняться **локально** (один процесс, одна машина) или в **распределённой среде** (несколько узлов, облако, распределённый обход гиперграфа). Способ развёртывания не меняет онтологии: блок, граф и мир остаются теми же сущностями; различается только среда исполнения и при необходимости способ передачи данных между узлами. Тем самым проект **не привязан к одному режиму выполнения**; «полная распределённость» на уровне вселенной (п. 8.3) и возможность локального запуска суть два допустимых варианта при едином контракте. Конкретные протоколы распределённого выполнения задаются каноном; философский принцип — **открытость к любой среде исполнения** при сохранении семантики загрузки, run и сериализации.

### 10.14 Мультимодальность как принцип

**Тип данных (модальность)** задаётся **портами и типами**; движок **не привязан к одной модальности**. Текст, изображение, аудио, видео, 3D-сцены, графы данных — всё это возможные форматы входов и выходов блоков; контракт (имена портов, типы, run) единый. LLM, VLM, диффузия, NeRF, RAG и т.д. суть комбинации блоков с разными модальностями на портах; мультимодальные пайплайны (текст → изображение → видео, граф → эмбеддинг → поиск) собираются по тем же правилам гиперграфа. **Мультимодальность** закрепляется как принцип: система открыта по содержанию не только в смысле архитектур моделей, но и в смысле **любой модальности данных** на границах блоков; одна онтология обслуживает все модальности.

### 10.15 Асинхронность и время выполнения

Порядок выполнения задан структурой (п. 10.8); при этом **асинхронное выполнение** (параллельный обход узлов, отложенные вызовы, неблокирующая передача по рёбрам) — **допустимая реализация**, если семантика и воспроизводимость сохраняются в рамках контракта. Движок не предписывает единственную модель времени выполнения: синхронный обход и асинхронное/параллельное исполнение суть варианты при условии, что наблюдаемый результат (при фиксированных входах и конфиге) согласован с определённым порядком и что состояние остаётся сериализуемым и наблюдаемым. Тем самым **асинхронность** не противоречит детерминированности и воспроизводимости: она входит в контракт реализации исполнения, а не в отмену принципов прозрачности и предсказуемости.

### 10.16 Пригодность артефактов для CI/CD

Сериализуемость (конфиг + чекпоинт), версионирование (п. 10.11) и тестируемость (п. 10.12) делают артефакты проекта **пригодными для автоматизированных пайплайнов** сборки, тестирования и развёртывания (CI/CD). Блок, граф, пайплайн, мир и вселенная могут собираться из репозитория, проходить автоматические тесты (воспроизводимый прогон по конфигу и фиксированным входам) и разворачиваться в целевую среду как версионированные артефакты. Философия **не предписывает** конкретный инструмент (GitHub Actions, GitLab CI, Jenkins и т.д.) или формат пайплайна — закрепляется принцип: **артефакты Yggdrasil по своей природе встраиваются в CI/CD** без дополнительной онтологии; конфиг и чекпоинт суть то, что коммитится, тестируется и доставляется. Тем самым непрерывная интеграция и доставка — прямое следствие единого контракта, сериализации и воспроизводимости, а не отдельно добавляемая возможность.

### 10.17 Безопасность и доверие

Безопасность и доверие к артефактам и выполнению рассматриваются **в рамках контракта и явных данных**: происхождение артефакта, подпись, идентификатор, при необходимости — песочница выполнения или политика доступа задаются **явно** (конфиг, метаданные, порты), а не скрытой «магией» движка. Философия **не предписывает** конкретную модель безопасности (например, обязательную подпись или единый провайдер доверия); закрепляется принцип: **безопасность и доверие — в зоне видимости** пользователя и в рамках того, что можно сериализовать и проверить по контракту. Тем самым тема не игнорируется: она входит в границу системы как возможность явной реализации, без навязывания единственного решения.

### 10.18 Самодокументирование артефактов

Поскольку конфиг, порты и структура **наблюдаемы** (п. 10.7), артефакты (блок, граф, мир, вселенная) **допускают генерацию описаний и документации из своей структуры**. Самодокументирование — не отдельная подсистема, а следствие единого контракта: из спецификации портов, имён узлов и связей можно получать человеко-читаемые или машино-читаемые описания. Философия не предписывает формат документации (Markdown, OpenAPI, граф схем и т.д.); закрепляется принцип: **артефакты по своей природе самодокументируемы** в пределах того, что задано конфигом и контрактом. Тем самым прозрачность и «единый язык» дополняются возможностью явно извлекать описание из артефакта.

### 10.19 Обратная совместимость при эволюции канона

При эволюции канона (п. 1.11) **обратная совместимость** по возможности сохраняется: старые конфиги и чекпоинты остаются загружаемыми; несовместимые изменения **явно версионируются** (мажорная версия формата, миграционные правила). Конкретные правила версионирования контрактов и форматов задаются каноном; философский принцип — **эволюция не отменяет воспроизводимость**: пользователь вправе опереться на любую зафиксированную версию артефакта. Тем самым принцип из п. 1.11 получает продолжение на уровне сериализации и развёртывания.

### 10.20 Интероперабельность и открытость форматов

Система **допускает экспорт и импорт** в общепринятые форматы (например, ONNX для моделей, открытые спецификации графов и т.д.) там, где это не ломает контракт и воспроизводимость. Философия **не предписывает** единственный формат обмена и **не закрывает** систему: любой бэкенд или инструмент, способный производить или потреблять артефакты по контракту (в нативном или в совместимом формате), допустим. **Интероперабельность** закреплена как принцип: конфиг и чекпоинт — формат обмена (п. 10.1); при необходимости артефакты могут быть представлены и в иных открытых форматах для взаимодействия с внешними экосистемами без нарушения единства онтологии внутри Yggdrasill.

### 10.21 Конфиг и декларативность

Поведение и сборка системы задаются **в первую очередь конфигом** (декларативно): структура графа, пайплайна, мира и вселенной описывается в конфигурации; код реализации **обслуживает контракт**, а не подменяет его жёстко зашитой логикой. Тем самым **конфиг первичен**: то, что можно выразить конфигом, не должно требовать правок кода; воспроизводимость (п. 10.6) и отсутствие скрытого состояния (п. 10.7) опираются на то, что поведение выводимо из явно заданного конфига и входов. Философия не предписывает единственный формат конфига (YAML, JSON, DSL и т.д.); закрепляется принцип: **декларативность как ориентация** — где возможно, система настраивается и расширяется через конфиг и реестр, а не через императивные изменения ядра.

### 10.22 Языковая и инструментальная нейтральность

Контракт (порты, run, сериализация) **не привязан к одному языку программирования или инструменту**: реализация движка и блоков может быть на любом языке; один и тот же конфиг и чекпоинт **воспроизводимы в другой среде** при соблюдении контракта (п. 10.1 — «другая установка, другой язык бэкенда при том же контракте портов и run»). **Языковая и инструментальная нейтральность** закреплена как принцип: проект не предписывает единственный стек; сообщество и пользователи вправе реализовать контракт на выбранном ими языке и в выбранных инструментах, сохраняя совместимость артефактов. Тем самым «нет привязки к вендору» дополняется **нет привязки к языку и платформе** — единство задаётся контрактом, а не конкретной реализацией.

### 10.23 Документация как часть воспроизводимости

Канон и документация (философия, схемы, описание уровней, форматы) **версионируются и эволюционируют** вместе с контрактами (п. 1.11, 10.19); документация — **часть воспроизводимости**: без соответствующей версии документации воспроизведение артефакта или понимание контракта неполно. Тем самым документация не «приложение», а **часть артефакта проекта** в широком смысле: конфиг + чекпоинт + **актуальная документация** для данной версии контракта позволяют сообществу воспроизвести и понять любой сценарий. Конкретный способ версионирования документации (теги, каталог, ссылки в конфиге) задаётся каноном; философский принцип — **документация входит в воспроизводимость** и в открытый доступ сообществу (п. 1.15).

---

## Часть XI. Внешние миры и источники контекста

### 11.1 Поддержка вики-ресурсов (Fandom, Wikipedia и аналоги)

Система должна позволять **сформировать или наполнить мир по ссылке на вики-ресурс**: заполнение мира в сериализованной форме на основе контента с сайта (описание, персонажи, глоссарии, истории, статьи). Поддерживаются не только **Fandom.com**, но и **Wikipedia** и **аналогичные вики-ресурсы** — любой источник, из которого можно извлечь структурированный или текстовый лор (статьи, категории, ссылки). Один URL или идентификатор ресурса → конфигурация/начальное наполнение мира. Результат — конфиг мира и/или начальное содержание; дальше мир работает по канону (цикл, state, Development of the world). При необходимости такой мир может быть зафиксирован как End World. Детали парсинга, лимитов обхода и маппинга в модель мира задаются реализацией; философский принцип — **возможность использовать такие ресурсы без жёсткой привязки к одному сайту**.

### 11.2 Блоки через API: единый контракт, никакой разницы

**Любой блок**, для которого возможно подключение через API (LLM, VLM, эмбеддинги, генерация изображений по API и т.д.), должен иметь **возможность работать через API без каких-либо изменений** в использовании. То есть **не должно быть разницы** между блоком, подключённым через API (без локальных весов), и блоком с весами на эндпоинте или с локально загруженными весами: один и тот же контракт портов, одна и та же семантика выполнения, одни и те же сценарии. Граф, пайплайн, этап и мир **не зависят** от того, как реализован блок — по API или локально; выбор задаётся только конфигом блока (backend: API vs local/endpoint). Никакой специальной обработки, никаких «ветвлений» в коде под «API-блок»: для остальной системы блок остаётся блоком с теми же входами/выходами и тем же run. Этапы мира (Автор, Философ, Архитектор, Development) и любые другие узлы могут использовать такие блоки полностью через API; обучение, сериализация и повторное использование моделей согласованы с этим принципом (в т.ч. сценарии с API-узлами — см. канон TRAINING_REUSE_AND_API_SCENARIOS).

---

## Часть XII. Итог: развитие философской идеи в проекте

### 12.1 Как проводится единая философская нить

Философия проекта выстраивается **структурно** — как последовательное развитие одной идеи от основания до высших уровней. Ниже показано, **как** эта идея развивается шаг за шагом, так что каждый следующий уровень не привносит новую онтологию, а развёртывает ту же мысль.

**Шаг 1. Два начала и их синтез.** В основании — разделение на материальное (то, что хранит и несёт) и идеальное (то, что задаёт связи и порядок). Они воплощаются в **блоке** и **узле гиперграфа**; правило «любой блок может стать узлом» замыкает фундамент. В гегелевском смысле **синтез** этих двух моментов — сам гиперграф и это правило: снятие (Aufhebung), единство понятия. Итог: система держится не на двух разрозненных сущностях, а на их **единстве в гиперграфе**. Цель проекта — предельная гибкость и масштабируемость; одна философская позиция описывает устройство **любой сложной системы** вплоть до модели вселенной. Три столпа: **простота запуска** (буквально в несколько строк кода при полной автоматизации согласования), **всеобъемлющая сериализация** (мощь и многофункциональность при воспроизводимости всего) и **абсолютная свобода настройки** (любые архитектуры, задачи, сценарии, миры, сообщества). В духе «Minecraft в мире программирования — но больше»: из конечного набора абстракций собирается что угодно, вплоть до вселенной и её сообщества. Фреймворк — **песок в бесконечной пустыне**: пользователь создаёт любые формы, от простых до целых миров; **единственное ограничение — фантазия**. **Полная кастомизируемость** — любая модель, задача, цепочка задач, последовательность или состав переходов, взаимодействие между мирами — реализуется **без изменений движка**, без структурных инъекций в ядро; инструменты (контракт, реестр) дают возможность кастомной реализации всего при неизменной основе и философской мысли.

**Шаг 2. Единая форма на всех уровнях.** Если синтез — гиперграф, то и движок системы — гиперграф; не граф, а именно **гиперграф** (гиперрёбра, гиперссылки). Одна и та же форма повторяется на каждом уровне: гиперграф задачи → гиперграф гиперграфов (пайплайн) → гиперграф пайплайнов (переход) → гиперграф переходов (мир) → гиперграф миров (вселенная). Философское развитие: **одна структура** пронизывает всё; различается только то, что является узлом и что течёт по рёбрам (данные, затем state, затем обмен между мирами).

**Шаг 3. Свобода при единстве.** Из единства основы выводится принцип **Lego**: максимальная свобода сборки (любой блок с любым в рамках портов и типов) при **единой основе** — материальный блок и идеальная форма узла. Нет противоречия между свободой и структурой: структура задаёт правило, свобода — способ сборки внутри него.

**Шаг 4. Абстрактный уровень и переход к конкретному.** Над фундаментом не вводятся новые «атомы», а вводятся **абстрактные роли** (Backbone, Solver, Codec, …) — специализации пары блок/узел; каждая такая сущность **двойно наследует** Block и Node, то есть по определению есть **одно понятие** (материя и форма в одном типе). Философский ход: **конечный набор абстракций** → **бесконечное множество конкретных решений**. Из одного и того же набора ролей собирается любая конкретная задача; аналогия — алфавит и слова. Идея синтеза сохраняется и закрепляется в типологии: каждая роль есть единство блока и узла с фиксированной задачей.

**Шаг 5. Иерархия как восхождение одной идеи.** Пайплайн — гиперграф, узлами которого являются целые гиперграфы задач; переход (Stage) — гиперграф пайплайнов, реализующий одну **метаморфозу** state; мир — цепочка таких переходов, по гиперрёбрам течёт state. Развитие идеи: то, что на уровне задачи было **потоком данных**, на уровне мира становится **потоком состояния** (state), претерпевающего качественные превращения (материя ↔ идея). Тот же принцип «узлы + поток» поднимается на новый уровень.

**Шаг 6. Мир как становление.** Мир — не объект, а **процесс**: непрерывное становление (Гераклит), цикл метаморфоз (диалектика), state как «память» и «план», возможность самодвижения (автопоэзис). Первая итерация может начаться **без предзаданного state** — мир способен породить первый шаг из себя; пользователь выступает **опциональным со-автором**, а не необходимой причиной каждого шага. **Миры могут быть смержены несколькими доступными способами** (объединение контента, state, стратегии разрешения конфликтов); слияние — поддерживаемая возможность, выбор способа задаётся каноном. Цикл мира **структурно тождествен кругу Дэна Хармона** (п. 7.8): мир как субъект проходит восемь фаз (статус-кво → желание → выход → обретение → цена → возврат → изменение); одна абстрактная форма задаёт и нарратив, и систему. Философская нить: на уровне мира та же оппозиция материи и идеи развёртывается во **времени** — как цикл из пяти переходов и пяти блоков state; единство сохраняется в единстве state и единстве порядка перехода.

**Шаг 7. Вселенная как множество миров в единстве связей.** Вселенная — **высший уровень проекта**; выше неё уровня нет. Она представима **гиперграфом миров** и обладает **единым «эфиром вселенной»** — общей средой, в которой миры существуют и взаимодействуют. Выше мира — гиперграф миров; счёт миров и связи между ними. Идея развития: **множество** (много миров) становится **единым целым** за счёт гиперграфа и эфира (гиперрёбра, обмен, сущности, кросс-мировое влияние). Этап Вселенной — для сообщества; End Worlds — фиксированные точки, к которым можно привязаться. Та же логика «единство в структуре» переносится на уровень множества миров: не хаос, а **древо** (Иггдрасиль) — связная целостность в едином эфире.

**Шаг 8. Граница системы и единый контракт.** Внешние источники (вики: Fandom, Wikipedia и аналоги) и блоки через API встроены так, чтобы **не ломать нить**: формирование мира из вики-ресурса — тот же канон мира после наполнения; блок через API — **никакой разницы** с блоком с локальными весами (единый контракт, одни сценарии). **Поддержка и возможность использования баз данных** закреплены как принцип: БД — допустимая реализация хранилища для конфигов, чекпоинтов, контента миров и состояния без изменения контракта и онтологии; источник данных (файл, API, БД) не меняет семантики загрузки и сохранения. **Тождество без дублирования**: один checkpoint_ref → один экземпляр в памяти на всех уровнях (экономия материи). **Мир как шаблон и вариация**: базовый мир + LoRA (или аналоги) дают множество кастомных миров без дублирования всей материи. **Открытость по содержанию**: фундамент предписывает только форму (контракт, порты); любая архитектура и любой тип модели встраиваются как блок — система не привязана к одному семейству моделей. **Полная поддержка парадигм на базе движка**: агентные системы (в духе n8n), графовые воркфлоу (LangChain / LangGraph), Neural Radiance Fields (NeRF), Graph Neural Networks (GNN) и RAG обеспечиваются **полностью аналогичным функционалом** в рамках движка Yggdrasil — без отдельной онтологии (см. п. 9.4). Сериализация и обучаемость на всех уровнях — продолжение того же единства во времени (сохранить/загрузить, обучить). **Версионирование артефактов** (п. 10.11), **тестируемость и отладка** (п. 10.12), **локальное и распределённое выполнение** при одном контракте (п. 10.13), **мультимодальность** как принцип (п. 10.14), **форк и производные миры** (п. 7.7), **асинхронность** при сохранении воспроизводимости (п. 10.15), **пригодность артефактов для CI/CD** (п. 10.16), **безопасность и доверие** в рамках контракта (п. 10.17), **самодокументирование артефактов** (п. 10.18), **обратная совместимость** при эволюции канона (п. 1.11, 10.19), **интероперабельность и открытость форматов** (п. 10.20), **разные уровни экспертизы** при единой онтологии (п. 1.13), **граница «система / использование системы»** (п. 1.9), **минимализм и отказ от раздувания** (п. 3.8), **расширяемость только через контракт, без форка ядра** (п. 1.6), **этика и ответственность** как минимальный принцип (п. 1.14), **конфиг и декларативность** (п. 10.21), **открытый доступ сообществу и воспроизводимость экспериментов** (п. 1.15), **языковая и инструментальная нейтральность** (п. 10.22), **документация как часть воспроизводимости** (п. 10.23) закреплены как принципы. Гибкость использования (только агенты, только мир, только диффузия, любые комбинации) — следствие единой основы: можно опираться на любой уровень, не меняя философии.

Таким образом, **единая философская нить** — это не перечень тем, а **последовательное развёртывание** одной мысли: два начала → их синтез в гиперграфе → одна форма на всех уровнях → свобода при единстве → абстракции и конкретное → иерархия как восхождение → мир как становление → вселенная как целое множества → проницаемая граница при едином контракте. Каждый шаг вытекает из предыдущего; новых онтологий не вводится.

### 12.2 Назначение документа и устойчивость философии

Этот документ — **главный философский ориентир** при проектировании Universe Generator 3.0. Он задаёт *зачем*, *почему*, *как* и *что именно* для всех уровней и проводит **развитие философской идеи** в проекте структурно — от двух начал и синтеза до вселенной и границы системы. **Философия замкнута с обеих сторон:** снизу — начальная граница (философская мысль автора как первичная идеальная сущность, агентная среда как материальная возможность реализации, пустая агентная среда как чистое ничто); сверху — вселенная как высший уровень, выше которой реальный мир и взаимодействие пользователей, образующие мета-пространство (п. 1.9, 12.3). Операционная схема мира (цикл, state, условия выполнения) задаётся в каноне (Scheme.md); технические детали уровней — в файлах канона (Graph_Level, Pipeline_Level, Stage_Level, World_Level, EXPANSION_UNIVERSE и др.). Философия не подменяет канон, а извлекает из него единую мысль и показывает, как она развёртывается от основания до высших представлений.

**Философия как входная точка.** Документ написан на **естественном языке** (русский) и читаем без кода; он служит **входной точкой** для понимания проекта: сначала мысль и принципы, затем канон и реализация. Новый участник или заинтересованный читатель может начать с философии, чтобы получить целостную картину *зачем* и *почему*, и лишь потом погружаться в схемы и код. Тем самым философия — не приложение к проекту, а **первый слой** ориентиров.

**Устойчивость документа.** Данный текст философии — **неизменяемый якорь**: реализации, канон и конкретные форматы могут эволюционировать, но сам документ Philosophy **не подлежит правкам**. Принципы (два начала, синтез, гиперграф, Lego, граница, кастомизируемость без изменений движка и т.д.) зафиксированы; в Philosophy **не вносятся изменения** — ни под частные случаи, ни под эволюцию канона или кода. Канон и код могут меняться только **в рамках** философии; философия используется как **единственная библия** проекта, относительно которой определяется «соответствие» всему остальному.

### 12.3 Уровень метавселенной не вводится: достаточность вселенной и позиция автора

**Метавселенная как уровень онтологии излишня и вредна.** В проекте **не вводится** уровень «метавселенная» над вселенной. То, что в массовой культуре именуют метавселенной, по замыслу проекта **должно образовываться из взаимодействия пользователей в реальном мире** и **публикации ими своих вселенных на единой площадке**, где другие пользователи могут эти вселенные исследовать, сравнивать и с ними взаимодействовать. Единая площадка (платформа, каталог, сообщество) и реальное взаимодействие людей — вот где возникает живое «мета»; добавлять поверх вселенной ещё один формальный уровень онтологии не только излишне, но и **вредно**: оно размывает границу между системой (гиперграф миров, эфир вселенной) и тем, что происходит в человеческом сообществе и в реальном мире. Вселенная остаётся **высшим уровнем**; «мета» — не следующий ярус графа, а **способ использования** вселенных людьми. Тем самым положение закреплено: уровень метавселенной в Yggdrasill **не вводится**.

**Концепция метавселенной и позиция автора.** Автор считает общепринятую концепцию метавселенной **испорченной влиянием бездарного образа мышления западного мира XXI века** — коммодификация, спекуляция, подмена живого взаимодействия симулякрами и маркетинговыми пузырями. По этой причине проект **не вводит** метавселенную ещё и потому, что сама концепция, по мнению автора, **должна быть принципиально пересмотрена** — прежде чем что-либо подобное могло бы войти в онтологию или в философию Yggdrasill. Пока пересмотр не произошёл, уровень вселенной остаётся верхней границей системы; «мета» живёт вне онтологии — в реальном мире пользователей и на единой площадке публикации и исследования вселенных.

---